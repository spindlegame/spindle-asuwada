<?php
// This script and data application were generated by AppGini 5.94
// Download AppGini for free from https://bigprof.com/appgini/download/

	/* Configuration */
	/*************************************/

		$pcConfig = [
			'game_agent' => [
			],
			'biblio_author' => [
			],
			'biblio_doc' => [
				'author_id' => [
					'parent-table' => 'biblio_author',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Corpus <span class="hidden child-label-biblio_doc child-field-caption">(ID de autor)</span>',
					'auto-close' => true,
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'Im&#225;gen de car&#225;tula', 2 => 'Autor', 3 => 'ID de autor', 4 => 'Tipo de texto', 5 => 'G&#233;nero', 6 => 'Fecha de creaci&#243;n', 7 => 'Fecha de publicaci&#243;n', 8 => 'T&#237;tulo', 9 => 'Subt&#237;tulo', 10 => 'Editor', 11 => 'Lugar de publicaci&#243;n', 12 => 'Referencia', 13 => 'Descripci&#243;n', 14 => 'Fuente', 15 => 'Medio', 16 => 'Idioma', 17 => 'Formato', 18 => 'Sujeto', 19 => 'Derechos de autor', 20 => 'Titular de derecho', 21 => 'N&#186; WorldCat', 22 => 'Organizaci&#243;n control de autoridades', 23 => 'C&#243;digo de control de autoridades', 24 => 'Texto', 25 => 'Fuente externa', 26 => 'Etiquetas', 27 => 'Equipo bibliogr&#225;fico', 28 => 'Bibl&#237;ografo analista principal', 29 => 'Evaluaci&#243;n de datos'),
					'display-field-names' => array(0 => 'id', 1 => 'img', 2 => 'author_name', 3 => 'author_id', 4 => 'type', 5 => 'genre', 6 => 'created', 7 => 'published', 8 => 'title', 9 => 'subtitle', 10 => 'publisher', 11 => 'location', 12 => 'citation', 13 => 'description', 14 => 'source', 15 => 'medium', 16 => 'language', 17 => 'format', 18 => 'subject', 19 => 'rights', 20 => 'rights_holder', 21 => 'world_cat_no', 22 => 'authority_organization', 23 => 'authority_code', 24 => 'pdf_book', 25 => 'ext_source', 26 => 'tags', 27 => 'team', 28 => 'biblio_lead', 29 => 'data_evaluation'),
					'sortable-fields' => array(0 => '`biblio_doc`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => '`class_bibliography_type1`.`type`', 5 => '`class_bibliography_genre1`.`genre`', 6 => '`biblio_doc`.`created`', 7 => '`biblio_doc`.`published`', 8 => 9, 9 => 10, 10 => 11, 11 => 12, 12 => 13, 13 => 14, 14 => 15, 15 => '`class_bibliography_media1`.`definition`', 16 => 17, 17 => 18, 18 => 19, 19 => '`class_rights1`.`right`', 20 => 21, 21 => 22, 22 => 23, 23 => '`biblio_doc`.`authority_code`', 24 => 25, 25 => 26, 26 => 27, 27 => '`biblio_team1`.`team`', 28 => 29, 29 => '`class_evaluation1`.`evaluation_type`'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-biblio_doc',
					'template-printable' => 'children-biblio_doc-printable',
					'query' => "SELECT `biblio_doc`.`id` as 'id', `biblio_doc`.`img` as 'img', IF(    CHAR_LENGTH(`biblio_author1`.`last_name`) || CHAR_LENGTH(`biblio_author1`.`first_name`), CONCAT_WS('',   `biblio_author1`.`last_name`, ', ', `biblio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '    ', `biblio_author1`.`author_memberid`), '') as 'author_id', IF(    CHAR_LENGTH(`class_bibliography_type1`.`type`), CONCAT_WS('',   `class_bibliography_type1`.`type`), '') as 'type', IF(    CHAR_LENGTH(`class_bibliography_genre1`.`genre`), CONCAT_WS('',   `class_bibliography_genre1`.`genre`), '') as 'genre', if(`biblio_doc`.`created`,date_format(`biblio_doc`.`created`,'%d/%m/%Y %H:%i'),'') as 'created', if(`biblio_doc`.`published`,date_format(`biblio_doc`.`published`,'%d/%m/%Y %H:%i'),'') as 'published', `biblio_doc`.`title` as 'title', `biblio_doc`.`subtitle` as 'subtitle', `biblio_doc`.`publisher` as 'publisher', `biblio_doc`.`location` as 'location', `biblio_doc`.`citation` as 'citation', `biblio_doc`.`description` as 'description', `biblio_doc`.`source` as 'source', IF(    CHAR_LENGTH(`class_bibliography_media1`.`definition`), CONCAT_WS('',   `class_bibliography_media1`.`definition`), '') as 'medium', IF(    CHAR_LENGTH(`class_language1`.`short`) || CHAR_LENGTH(`class_language1`.`language`), CONCAT_WS('',   `class_language1`.`short`, '   ', `class_language1`.`language`), '') as 'language', `biblio_doc`.`format` as 'format', `biblio_doc`.`subject` as 'subject', IF(    CHAR_LENGTH(`class_rights1`.`right`), CONCAT_WS('',   `class_rights1`.`right`), '') as 'rights', `biblio_doc`.`rights_holder` as 'rights_holder', `biblio_doc`.`world_cat_no` as 'world_cat_no', IF(    CHAR_LENGTH(`class_authority_library1`.`abbreviation`) || CHAR_LENGTH(`class_authority_library1`.`authority_name`), CONCAT_WS('',   `class_authority_library1`.`abbreviation`, '   ', `class_authority_library1`.`authority_name`), '') as 'authority_organization', `biblio_doc`.`authority_code` as 'authority_code', `biblio_doc`.`pdf_book` as 'pdf_book', `biblio_doc`.`ext_source` as 'ext_source', `biblio_doc`.`tags` as 'tags', IF(    CHAR_LENGTH(`biblio_team1`.`team`), CONCAT_WS('',   `biblio_team1`.`team`), '') as 'team', IF(    CHAR_LENGTH(`biblio_analyst1`.`last_name`) || CHAR_LENGTH(`biblio_analyst1`.`first_name`), CONCAT_WS('',   `biblio_analyst1`.`last_name`, ', ', `biblio_analyst1`.`first_name`), '') as 'biblio_lead', IF(    CHAR_LENGTH(`class_evaluation1`.`evaluation_type`), CONCAT_WS('',   `class_evaluation1`.`evaluation_type`), '') as 'data_evaluation' FROM `biblio_doc` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`biblio_doc`.`author_id` LEFT JOIN `class_bibliography_type` as class_bibliography_type1 ON `class_bibliography_type1`.`id`=`biblio_doc`.`type` LEFT JOIN `class_bibliography_genre` as class_bibliography_genre1 ON `class_bibliography_genre1`.`id`=`biblio_doc`.`genre` LEFT JOIN `class_bibliography_media` as class_bibliography_media1 ON `class_bibliography_media1`.`id`=`biblio_doc`.`medium` LEFT JOIN `class_language` as class_language1 ON `class_language1`.`id`=`biblio_doc`.`language` LEFT JOIN `class_rights` as class_rights1 ON `class_rights1`.`id`=`biblio_doc`.`rights` LEFT JOIN `class_authority_library` as class_authority_library1 ON `class_authority_library1`.`id`=`biblio_doc`.`authority_organization` LEFT JOIN `biblio_team` as biblio_team1 ON `biblio_team1`.`id`=`biblio_doc`.`team` LEFT JOIN `biblio_analyst` as biblio_analyst1 ON `biblio_analyst1`.`id`=`biblio_doc`.`biblio_lead` LEFT JOIN `class_evaluation` as class_evaluation1 ON `class_evaluation1`.`id`=`biblio_doc`.`data_evaluation` "
				],
			],
			'biblio_transcript' => [
				'bibliography_title' => [
					'parent-table' => 'biblio_doc',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Transcripts <span class="hidden child-label-biblio_transcript child-field-caption">(T&#237;tulo de texto)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/book_edit.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'Autor', 2 => 'ID de autor', 3 => 'ID de texto', 4 => 'T&#237;tulo de texto', 5 => 'T&#237;tulo de la transcripci&#243;n', 6 => 'Transcripci&#243;n', 7 => 'Cr&#233;ditos', 8 => 'Drechos de propiedad intelectual', 9 => 'Equipo bibliogr&#225;fico', 10 => 'Transcriptora principal', 11 => 'Evaluaci&#243;n de datos'),
					'display-field-names' => array(0 => 'id', 1 => 'author', 2 => 'author_memberID', 3 => 'bibliography_id', 4 => 'bibliography_title', 5 => 'transcript_title', 6 => 'transcript', 7 => 'credits', 8 => 'ip_rights', 9 => 'team', 10 => 'biblio_lead', 11 => 'data_evaluation'),
					'sortable-fields' => array(0 => '`biblio_transcript`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => '`biblio_doc1`.`title`', 5 => 6, 6 => 7, 7 => 8, 8 => '`class_rights1`.`right`', 9 => '`biblio_team1`.`team`', 10 => 11, 11 => '`class_evaluation1`.`evaluation_type`'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-biblio_transcript',
					'template-printable' => 'children-biblio_transcript-printable',
					'query' => "SELECT `biblio_transcript`.`id` as 'id', IF(    CHAR_LENGTH(`biblio_author1`.`last_name`) || CHAR_LENGTH(`biblio_author1`.`first_name`), CONCAT_WS('',   `biblio_author1`.`last_name`, ', ', `biblio_author1`.`first_name`), '') as 'author', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') as 'author_memberID', IF(    CHAR_LENGTH(`biblio_doc1`.`id`), CONCAT_WS('',   `biblio_doc1`.`id`, '   '), '') as 'bibliography_id', IF(    CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`title`), '') as 'bibliography_title', `biblio_transcript`.`transcript_title` as 'transcript_title', `biblio_transcript`.`transcript` as 'transcript', `biblio_transcript`.`credits` as 'credits', IF(    CHAR_LENGTH(`class_rights1`.`right`), CONCAT_WS('',   `class_rights1`.`right`), '') as 'ip_rights', IF(    CHAR_LENGTH(`biblio_team1`.`team`), CONCAT_WS('',   `biblio_team1`.`team`), '') as 'team', IF(    CHAR_LENGTH(`biblio_analyst1`.`last_name`) || CHAR_LENGTH(`biblio_analyst1`.`first_name`), CONCAT_WS('',   `biblio_analyst1`.`last_name`, ', ', `biblio_analyst1`.`first_name`), '') as 'biblio_lead', IF(    CHAR_LENGTH(`class_evaluation1`.`evaluation_type`), CONCAT_WS('',   `class_evaluation1`.`evaluation_type`), '') as 'data_evaluation' FROM `biblio_transcript` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`biblio_transcript`.`author_memberID` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`biblio_transcript`.`bibliography_title` LEFT JOIN `class_rights` as class_rights1 ON `class_rights1`.`id`=`biblio_transcript`.`ip_rights` LEFT JOIN `biblio_team` as biblio_team1 ON `biblio_team1`.`id`=`biblio_transcript`.`team` LEFT JOIN `biblio_analyst` as biblio_analyst1 ON `biblio_analyst1`.`id`=`biblio_transcript`.`biblio_lead` LEFT JOIN `class_evaluation` as class_evaluation1 ON `class_evaluation1`.`id`=`biblio_transcript`.`data_evaluation` "
				],
			],
			'biblio_token' => [
				'transcript' => [
					'parent-table' => 'biblio_transcript',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Tokens <span class="hidden child-label-biblio_token child-field-caption">(Transcripci&#243;n)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/book_key.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'ID Autor', 2 => 'Autor', 3 => 'Bibliograf&#237;a', 4 => 'Transcripci&#243;n', 5 => 'Sequencia de token', 6 => 'Token', 7 => 'Equipo bibliogr&#225;fico', 8 => 'Transcriptora principal', 9 => 'Evaluaci&#243;n de datos'),
					'display-field-names' => array(0 => 'id', 1 => 'author_id', 2 => 'author_name', 3 => 'bibliography', 4 => 'transcript', 5 => 'token_sequence', 6 => 'token', 7 => 'team', 8 => 'biblio_lead', 9 => 'data_evaluation'),
					'sortable-fields' => array(0 => '`biblio_token`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => 5, 5 => '`biblio_token`.`token_sequence`', 6 => 7, 7 => '`biblio_team1`.`team`', 8 => 9, 9 => '`class_evaluation1`.`evaluation_type`'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-biblio_token',
					'template-printable' => 'children-biblio_token-printable',
					'query' => "SELECT `biblio_token`.`id` as 'id', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') as 'author_id', IF(    CHAR_LENGTH(`biblio_author1`.`last_name`) || CHAR_LENGTH(`biblio_author1`.`first_name`), CONCAT_WS('',   `biblio_author1`.`last_name`, ', ', `biblio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`biblio_doc1`.`id`) || CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`id`, '   ', `biblio_doc1`.`title`), '') as 'bibliography', IF(    CHAR_LENGTH(`biblio_transcript1`.`id`) || CHAR_LENGTH(`biblio_transcript1`.`transcript_title`), CONCAT_WS('',   `biblio_transcript1`.`id`, '   ', `biblio_transcript1`.`transcript_title`), '') as 'transcript', `biblio_token`.`token_sequence` as 'token_sequence', `biblio_token`.`token` as 'token', IF(    CHAR_LENGTH(`biblio_team1`.`team`), CONCAT_WS('',   `biblio_team1`.`team`), '') as 'team', IF(    CHAR_LENGTH(`biblio_analyst1`.`last_name`) || CHAR_LENGTH(`biblio_analyst1`.`first_name`), CONCAT_WS('',   `biblio_analyst1`.`last_name`, ', ', `biblio_analyst1`.`first_name`), '') as 'biblio_lead', IF(    CHAR_LENGTH(`class_evaluation1`.`evaluation_type`), CONCAT_WS('',   `class_evaluation1`.`evaluation_type`), '') as 'data_evaluation' FROM `biblio_token` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`biblio_token`.`author_id` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`biblio_token`.`bibliography` LEFT JOIN `biblio_transcript` as biblio_transcript1 ON `biblio_transcript1`.`id`=`biblio_token`.`transcript` LEFT JOIN `biblio_team` as biblio_team1 ON `biblio_team1`.`id`=`biblio_token`.`team` LEFT JOIN `biblio_analyst` as biblio_analyst1 ON `biblio_analyst1`.`id`=`biblio_token`.`biblio_lead` LEFT JOIN `class_evaluation` as class_evaluation1 ON `class_evaluation1`.`id`=`biblio_token`.`data_evaluation` "
				],
			],
			'biblio_code_invivo' => [
				'token_sequence' => [
					'parent-table' => 'biblio_token',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Invivo <span class="hidden child-label-biblio_code_invivo child-field-caption">(Token_sequence)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/book_link.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'Autor', 2 => 'Bibliograf&#237;a', 3 => 'Transcripci&#243;n', 4 => 'Token_sequence', 5 => 'Token', 6 => 'Invivo', 7 => 'Fecha inicio', 8 => 'Fecha fin', 9 => 'Persona(s)', 10 => 'Lugar(es)', 11 => 'Etiquetas', 12 => 'Comentarios', 13 => 'Team', 14 => 'Analista principal', 15 => 'Evaluaci&#243;n de datos'),
					'display-field-names' => array(0 => 'id', 1 => 'author', 2 => 'bibliography', 3 => 'transcript', 4 => 'token_sequence', 5 => 'token', 6 => 'invivo', 7 => 'start_date', 8 => 'end_date', 9 => 'person', 10 => 'place', 11 => 'tags', 12 => 'comments', 13 => 'team', 14 => 'biblio_lead', 15 => 'data_evaluation'),
					'sortable-fields' => array(0 => '`biblio_code_invivo`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => 5, 5 => '`biblio_token1`.`token`', 6 => 7, 7 => '`biblio_code_invivo`.`start_date`', 8 => '`biblio_code_invivo`.`end_date`', 9 => 10, 10 => 11, 11 => 12, 12 => 13, 13 => '`biblio_team1`.`team`', 14 => 15, 15 => '`class_evaluation1`.`evaluation_type`'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-biblio_code_invivo',
					'template-printable' => 'children-biblio_code_invivo-printable',
					'query' => "SELECT `biblio_code_invivo`.`id` as 'id', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') as 'author', IF(    CHAR_LENGTH(`biblio_doc1`.`id`) || CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`id`, '   ', `biblio_doc1`.`title`), '') as 'bibliography', IF(    CHAR_LENGTH(`biblio_transcript1`.`id`) || CHAR_LENGTH(`biblio_transcript1`.`transcript_title`), CONCAT_WS('',   `biblio_transcript1`.`id`, '   ', `biblio_transcript1`.`transcript_title`), '') as 'transcript', IF(    CHAR_LENGTH(`biblio_token1`.`id`) || CHAR_LENGTH(`biblio_token1`.`token_sequence`), CONCAT_WS('',   `biblio_token1`.`id`, '   ', `biblio_token1`.`token_sequence`), '') as 'token_sequence', IF(    CHAR_LENGTH(`biblio_token1`.`token`), CONCAT_WS('',   `biblio_token1`.`token`), '') as 'token', `biblio_code_invivo`.`invivo` as 'invivo', if(`biblio_code_invivo`.`start_date`,date_format(`biblio_code_invivo`.`start_date`,'%d/%m/%Y %H:%i'),'') as 'start_date', if(`biblio_code_invivo`.`end_date`,date_format(`biblio_code_invivo`.`end_date`,'%d/%m/%Y %H:%i'),'') as 'end_date', `biblio_code_invivo`.`person` as 'person', `biblio_code_invivo`.`place` as 'place', `biblio_code_invivo`.`tags` as 'tags', `biblio_code_invivo`.`comments` as 'comments', IF(    CHAR_LENGTH(`biblio_team1`.`team`), CONCAT_WS('',   `biblio_team1`.`team`), '') as 'team', IF(    CHAR_LENGTH(`biblio_analyst1`.`last_name`) || CHAR_LENGTH(`biblio_analyst1`.`first_name`), CONCAT_WS('',   `biblio_analyst1`.`last_name`, ', ', `biblio_analyst1`.`first_name`), '') as 'biblio_lead', IF(    CHAR_LENGTH(`class_evaluation1`.`evaluation_type`), CONCAT_WS('',   `class_evaluation1`.`evaluation_type`), '') as 'data_evaluation' FROM `biblio_code_invivo` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`biblio_code_invivo`.`author` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`biblio_code_invivo`.`bibliography` LEFT JOIN `biblio_transcript` as biblio_transcript1 ON `biblio_transcript1`.`id`=`biblio_code_invivo`.`transcript` LEFT JOIN `biblio_token` as biblio_token1 ON `biblio_token1`.`id`=`biblio_code_invivo`.`token_sequence` LEFT JOIN `biblio_team` as biblio_team1 ON `biblio_team1`.`id`=`biblio_code_invivo`.`team` LEFT JOIN `biblio_analyst` as biblio_analyst1 ON `biblio_analyst1`.`id`=`biblio_code_invivo`.`biblio_lead` LEFT JOIN `class_evaluation` as class_evaluation1 ON `class_evaluation1`.`id`=`biblio_code_invivo`.`data_evaluation` "
				],
			],
			'biblio_code_demo' => [
				'token_id' => [
					'parent-table' => 'biblio_token',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Demography <span class="hidden child-label-biblio_code_demo child-field-caption">(Token)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/application_view_detail.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(1 => 'Game agent', 2 => 'Autor', 3 => 'Bibliograf&#237;a', 4 => 'Transcripci&#243;n', 5 => 'Token', 6 => 'Token', 7 => 'G&#233;nero', 8 => 'Etnicidad', 9 => 'Edad', 10 => 'Religi&#243;n', 11 => 'Orientaci&#243;n pol&#237;tica', 12 => 'Oficio', 13 => 'Estus o clase'),
					'display-field-names' => array(1 => 'game_agent', 2 => 'author', 3 => 'bibliography', 4 => 'transcript', 5 => 'token_id', 6 => 'token', 7 => 'sex', 8 => 'race', 9 => 'age', 10 => 'religion', 11 => 'party', 12 => 'job', 13 => 'status'),
					'sortable-fields' => array(0 => '`biblio_code_demo`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => 5, 5 => 6, 6 => '`biblio_token2`.`token`', 7 => 8, 8 => '`class_agent_race1`.`race`', 9 => 10, 10 => '`class_agent_religion1`.`religion`', 11 => '`class_agent_party1`.`party`', 12 => '`class_agent_job1`.`job`', 13 => '`class_agent_status1`.`status`'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-biblio_code_demo',
					'template-printable' => 'children-biblio_code_demo-printable',
					'query' => "SELECT `biblio_code_demo`.`id` as 'id', IF(    CHAR_LENGTH(`game_agent1`.`id`) || CHAR_LENGTH(`game_agent1`.`memberID`), CONCAT_WS('',   `game_agent1`.`id`, '   ', `game_agent1`.`memberID`), '') as 'game_agent', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') as 'author', IF(    CHAR_LENGTH(`biblio_doc1`.`id`) || CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`id`, ' - ', `biblio_doc1`.`title`), '') as 'bibliography', IF(    CHAR_LENGTH(`biblio_transcript1`.`id`) || CHAR_LENGTH(`biblio_transcript1`.`transcript_title`), CONCAT_WS('',   `biblio_transcript1`.`id`, ' - ', `biblio_transcript1`.`transcript_title`), '') as 'transcript', IF(    CHAR_LENGTH(`biblio_token1`.`id`) || CHAR_LENGTH(`biblio_token1`.`token_sequence`), CONCAT_WS('',   `biblio_token1`.`id`, ' - ', `biblio_token1`.`token_sequence`), '') as 'token_id', IF(    CHAR_LENGTH(`biblio_token2`.`token`), CONCAT_WS('',   `biblio_token2`.`token`), '') as 'token', IF(    CHAR_LENGTH(`class_gender1`.`gender`), CONCAT_WS('',   `class_gender1`.`gender`), '') as 'sex', IF(    CHAR_LENGTH(`class_agent_race1`.`race`), CONCAT_WS('',   `class_agent_race1`.`race`), '') as 'race', `biblio_code_demo`.`age` as 'age', IF(    CHAR_LENGTH(`class_agent_religion1`.`religion`), CONCAT_WS('',   `class_agent_religion1`.`religion`), '') as 'religion', IF(    CHAR_LENGTH(`class_agent_party1`.`party`), CONCAT_WS('',   `class_agent_party1`.`party`), '') as 'party', IF(    CHAR_LENGTH(`class_agent_job1`.`job`), CONCAT_WS('',   `class_agent_job1`.`job`), '') as 'job', IF(    CHAR_LENGTH(`class_agent_status1`.`status`), CONCAT_WS('',   `class_agent_status1`.`status`), '') as 'status' FROM `biblio_code_demo` LEFT JOIN `game_agent` as game_agent1 ON `game_agent1`.`id`=`biblio_code_demo`.`game_agent` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`biblio_code_demo`.`author` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`biblio_code_demo`.`bibliography` LEFT JOIN `biblio_transcript` as biblio_transcript1 ON `biblio_transcript1`.`id`=`biblio_code_demo`.`transcript` LEFT JOIN `biblio_token` as biblio_token1 ON `biblio_token1`.`id`=`biblio_code_demo`.`token_id` LEFT JOIN `biblio_token` as biblio_token2 ON `biblio_token2`.`id`=`biblio_code_demo`.`token` LEFT JOIN `class_agent_race` as class_agent_race1 ON `class_agent_race1`.`id`=`biblio_code_demo`.`race` LEFT JOIN `class_agent_religion` as class_agent_religion1 ON `class_agent_religion1`.`id`=`biblio_code_demo`.`religion` LEFT JOIN `class_agent_party` as class_agent_party1 ON `class_agent_party1`.`id`=`biblio_code_demo`.`party` LEFT JOIN `class_agent_job` as class_agent_job1 ON `class_agent_job1`.`id`=`biblio_code_demo`.`job` LEFT JOIN `class_agent_status` as class_agent_status1 ON `class_agent_status1`.`id`=`biblio_code_demo`.`status` LEFT JOIN `class_gender` as class_gender1 ON `class_gender1`.`id`=`game_agent1`.`gender` "
				],
				'token' => [
					'parent-table' => 'biblio_token',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Demography <span class="hidden child-label-biblio_code_demo child-field-caption">(Token)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/application_view_detail.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(1 => 'Game agent', 2 => 'Autor', 3 => 'Bibliograf&#237;a', 4 => 'Transcripci&#243;n', 5 => 'Token', 6 => 'Token', 7 => 'G&#233;nero', 8 => 'Etnicidad', 9 => 'Edad', 10 => 'Religi&#243;n', 11 => 'Orientaci&#243;n pol&#237;tica', 12 => 'Oficio', 13 => 'Estus o clase'),
					'display-field-names' => array(1 => 'game_agent', 2 => 'author', 3 => 'bibliography', 4 => 'transcript', 5 => 'token_id', 6 => 'token', 7 => 'sex', 8 => 'race', 9 => 'age', 10 => 'religion', 11 => 'party', 12 => 'job', 13 => 'status'),
					'sortable-fields' => array(0 => '`biblio_code_demo`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => 5, 5 => 6, 6 => '`biblio_token2`.`token`', 7 => 8, 8 => '`class_agent_race1`.`race`', 9 => 10, 10 => '`class_agent_religion1`.`religion`', 11 => '`class_agent_party1`.`party`', 12 => '`class_agent_job1`.`job`', 13 => '`class_agent_status1`.`status`'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-biblio_code_demo',
					'template-printable' => 'children-biblio_code_demo-printable',
					'query' => "SELECT `biblio_code_demo`.`id` as 'id', IF(    CHAR_LENGTH(`game_agent1`.`id`) || CHAR_LENGTH(`game_agent1`.`memberID`), CONCAT_WS('',   `game_agent1`.`id`, '   ', `game_agent1`.`memberID`), '') as 'game_agent', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') as 'author', IF(    CHAR_LENGTH(`biblio_doc1`.`id`) || CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`id`, ' - ', `biblio_doc1`.`title`), '') as 'bibliography', IF(    CHAR_LENGTH(`biblio_transcript1`.`id`) || CHAR_LENGTH(`biblio_transcript1`.`transcript_title`), CONCAT_WS('',   `biblio_transcript1`.`id`, ' - ', `biblio_transcript1`.`transcript_title`), '') as 'transcript', IF(    CHAR_LENGTH(`biblio_token1`.`id`) || CHAR_LENGTH(`biblio_token1`.`token_sequence`), CONCAT_WS('',   `biblio_token1`.`id`, ' - ', `biblio_token1`.`token_sequence`), '') as 'token_id', IF(    CHAR_LENGTH(`biblio_token2`.`token`), CONCAT_WS('',   `biblio_token2`.`token`), '') as 'token', IF(    CHAR_LENGTH(`class_gender1`.`gender`), CONCAT_WS('',   `class_gender1`.`gender`), '') as 'sex', IF(    CHAR_LENGTH(`class_agent_race1`.`race`), CONCAT_WS('',   `class_agent_race1`.`race`), '') as 'race', `biblio_code_demo`.`age` as 'age', IF(    CHAR_LENGTH(`class_agent_religion1`.`religion`), CONCAT_WS('',   `class_agent_religion1`.`religion`), '') as 'religion', IF(    CHAR_LENGTH(`class_agent_party1`.`party`), CONCAT_WS('',   `class_agent_party1`.`party`), '') as 'party', IF(    CHAR_LENGTH(`class_agent_job1`.`job`), CONCAT_WS('',   `class_agent_job1`.`job`), '') as 'job', IF(    CHAR_LENGTH(`class_agent_status1`.`status`), CONCAT_WS('',   `class_agent_status1`.`status`), '') as 'status' FROM `biblio_code_demo` LEFT JOIN `game_agent` as game_agent1 ON `game_agent1`.`id`=`biblio_code_demo`.`game_agent` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`biblio_code_demo`.`author` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`biblio_code_demo`.`bibliography` LEFT JOIN `biblio_transcript` as biblio_transcript1 ON `biblio_transcript1`.`id`=`biblio_code_demo`.`transcript` LEFT JOIN `biblio_token` as biblio_token1 ON `biblio_token1`.`id`=`biblio_code_demo`.`token_id` LEFT JOIN `biblio_token` as biblio_token2 ON `biblio_token2`.`id`=`biblio_code_demo`.`token` LEFT JOIN `class_agent_race` as class_agent_race1 ON `class_agent_race1`.`id`=`biblio_code_demo`.`race` LEFT JOIN `class_agent_religion` as class_agent_religion1 ON `class_agent_religion1`.`id`=`biblio_code_demo`.`religion` LEFT JOIN `class_agent_party` as class_agent_party1 ON `class_agent_party1`.`id`=`biblio_code_demo`.`party` LEFT JOIN `class_agent_job` as class_agent_job1 ON `class_agent_job1`.`id`=`biblio_code_demo`.`job` LEFT JOIN `class_agent_status` as class_agent_status1 ON `class_agent_status1`.`id`=`biblio_code_demo`.`status` LEFT JOIN `class_gender` as class_gender1 ON `class_gender1`.`id`=`game_agent1`.`gender` "
				],
			],
			'biblio_team' => [
			],
			'biblio_analyst' => [
			],
			'bio_team' => [
			],
			'bio_author' => [
			],
			'bio_story' => [
				'agent_id' => [
					'parent-table' => 'game_agent',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Biographies <span class="hidden child-label-bio_story child-field-caption">(Sujeto)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/butterfly.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'Equipo biogr&#225;fico', 2 => 'ID de bi&#243;grafo', 3 => 'Nombre del autor', 4 => 'Tipo de bibliograf&#237;a', 5 => 'Sujeto', 6 => 'Nombre del sujeto', 7 => 'T&#237;tulo de la biograf&#237;a', 8 => 'Enfoque', 9 => 'Etiquetas', 10 => 'Referencia', 11 => 'Nivel de colaboraci&#243;n'),
					'display-field-names' => array(0 => 'id', 1 => 'bio_team', 2 => 'author_id', 3 => 'author_name', 4 => 'type', 5 => 'agent_id', 6 => 'agent_name', 7 => 'story_title', 8 => 'approach', 9 => 'tags', 10 => 'citation', 11 => 'collaboration_status'),
					'sortable-fields' => array(0 => '`bio_story`.`id`', 1 => '`bio_team1`.`team`', 2 => 3, 3 => 4, 4 => '`class_bibliography_type1`.`type`', 5 => 6, 6 => 7, 7 => 8, 8 => 9, 9 => 10, 10 => 11, 11 => '`class_story_collab_type1`.`collab_type`'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-bio_story',
					'template-printable' => 'children-bio_story-printable',
					'query' => "SELECT `bio_story`.`id` as 'id', IF(    CHAR_LENGTH(`bio_team1`.`team`), CONCAT_WS('',   `bio_team1`.`team`), '') as 'bio_team', IF(    CHAR_LENGTH(`bio_author1`.`id`), CONCAT_WS('',   `bio_author1`.`id`, '   '), '') as 'author_id', IF(    CHAR_LENGTH(`bio_author1`.`last_name`) || CHAR_LENGTH(`bio_author1`.`first_name`), CONCAT_WS('',   `bio_author1`.`last_name`, ', ', `bio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`class_bibliography_type1`.`type`), CONCAT_WS('',   `class_bibliography_type1`.`type`), '') as 'type', IF(    CHAR_LENGTH(`game_agent1`.`id`) || CHAR_LENGTH(`game_agent1`.`memberID`), CONCAT_WS('',   `game_agent1`.`id`, '   ', `game_agent1`.`memberID`), '') as 'agent_id', IF(    CHAR_LENGTH(`game_agent1`.`last_name`) || CHAR_LENGTH(`game_agent1`.`first_name`), CONCAT_WS('',   `game_agent1`.`last_name`, ', ', `game_agent1`.`first_name`), '') as 'agent_name', `bio_story`.`story_title` as 'story_title', `bio_story`.`approach` as 'approach', `bio_story`.`tags` as 'tags', `bio_story`.`citation` as 'citation', IF(    CHAR_LENGTH(`class_story_collab_type1`.`collab_type`), CONCAT_WS('',   `class_story_collab_type1`.`collab_type`), '') as 'collaboration_status' FROM `bio_story` LEFT JOIN `bio_team` as bio_team1 ON `bio_team1`.`id`=`bio_story`.`bio_team` LEFT JOIN `bio_author` as bio_author1 ON `bio_author1`.`id`=`bio_story`.`author_id` LEFT JOIN `class_bibliography_type` as class_bibliography_type1 ON `class_bibliography_type1`.`id`=`bio_story`.`type` LEFT JOIN `game_agent` as game_agent1 ON `game_agent1`.`id`=`bio_story`.`agent_id` LEFT JOIN `class_story_collab_type` as class_story_collab_type1 ON `class_story_collab_type1`.`id`=`bio_story`.`collaboration_status` "
				],
			],
			'bio_chr' => [
				'author_id' => [
					'parent-table' => 'bio_author',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Characters <span class="hidden child-label-bio_chr child-field-caption">(ID de bi&#243;grafo)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/user_female.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'Im&#225;gen', 2 => 'ID de bi&#243;grafo', 3 => 'Nombre de bi&#243;grafo', 4 => 'Agente', 5 => 'Nombre del sujeto', 6 => 'Biograf&#237;a', 7 => 'Personaje', 8 => 'Arquetipo', 9 => 'Nombre de personaje', 10 => 'Rol', 11 => 'Comentarios'),
					'display-field-names' => array(0 => 'id', 1 => 'img', 2 => 'author_id', 3 => 'author_name', 4 => 'agent_id', 5 => 'agent_name', 6 => 'bio_story', 7 => 'bio_character', 8 => 'bio_archetype', 9 => 'character_name', 10 => 'role', 11 => 'comment'),
					'sortable-fields' => array(0 => '`bio_chr`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => 5, 5 => 6, 6 => 7, 7 => '`class_dramatica_character1`.`character`', 8 => 9, 9 => 10, 10 => 11, 11 => 12),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-bio_chr',
					'template-printable' => 'children-bio_chr-printable',
					'query' => "SELECT `bio_chr`.`id` as 'id', `bio_chr`.`img` as 'img', IF(    CHAR_LENGTH(`bio_author1`.`id`) || CHAR_LENGTH(`bio_author1`.`author_memberid`), CONCAT_WS('',   `bio_author1`.`id`, '   ', `bio_author1`.`author_memberid`), '') as 'author_id', IF(    CHAR_LENGTH(`bio_author1`.`last_name`) || CHAR_LENGTH(`bio_author1`.`first_name`), CONCAT_WS('',   `bio_author1`.`last_name`, ', ', `bio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`game_agent1`.`id`) || CHAR_LENGTH(`game_agent1`.`memberID`), CONCAT_WS('',   `game_agent1`.`id`, '   ', `game_agent1`.`memberID`), '') as 'agent_id', IF(    CHAR_LENGTH(`game_agent1`.`last_name`) || CHAR_LENGTH(`game_agent1`.`first_name`), CONCAT_WS('',   `game_agent1`.`last_name`, ', ', `game_agent1`.`first_name`), '') as 'agent_name', IF(    CHAR_LENGTH(`bio_story1`.`id`) || CHAR_LENGTH(`bio_story1`.`story_title`), CONCAT_WS('',   `bio_story1`.`id`, ' - ', `bio_story1`.`story_title`), '') as 'bio_story', IF(    CHAR_LENGTH(`class_dramatica_character1`.`character`), CONCAT_WS('',   `class_dramatica_character1`.`character`), '') as 'bio_character', IF(    CHAR_LENGTH(`class_dramatica_archetype1`.`archetype`), CONCAT_WS('',   `class_dramatica_archetype1`.`archetype`, ' '), '') as 'bio_archetype', `bio_chr`.`character_name` as 'character_name', `bio_chr`.`role` as 'role', `bio_chr`.`comment` as 'comment' FROM `bio_chr` LEFT JOIN `bio_author` as bio_author1 ON `bio_author1`.`id`=`bio_chr`.`author_id` LEFT JOIN `game_agent` as game_agent1 ON `game_agent1`.`id`=`bio_chr`.`agent_id` LEFT JOIN `bio_story` as bio_story1 ON `bio_story1`.`id`=`bio_chr`.`bio_story` LEFT JOIN `class_dramatica_character` as class_dramatica_character1 ON `class_dramatica_character1`.`id`=`bio_chr`.`bio_character` LEFT JOIN `class_dramatica_archetype` as class_dramatica_archetype1 ON `class_dramatica_archetype1`.`id`=`bio_chr`.`bio_archetype` "
				],
				'bio_story' => [
					'parent-table' => 'bio_story',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Characters <span class="hidden child-label-bio_chr child-field-caption">(Biograf&#237;a)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/user_female.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'Im&#225;gen', 2 => 'ID de bi&#243;grafo', 3 => 'Nombre de bi&#243;grafo', 4 => 'Agente', 5 => 'Nombre del sujeto', 6 => 'Biograf&#237;a', 7 => 'Personaje', 8 => 'Arquetipo', 9 => 'Nombre de personaje', 10 => 'Rol', 11 => 'Comentarios'),
					'display-field-names' => array(0 => 'id', 1 => 'img', 2 => 'author_id', 3 => 'author_name', 4 => 'agent_id', 5 => 'agent_name', 6 => 'bio_story', 7 => 'bio_character', 8 => 'bio_archetype', 9 => 'character_name', 10 => 'role', 11 => 'comment'),
					'sortable-fields' => array(0 => '`bio_chr`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => 5, 5 => 6, 6 => 7, 7 => '`class_dramatica_character1`.`character`', 8 => 9, 9 => 10, 10 => 11, 11 => 12),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-bio_chr',
					'template-printable' => 'children-bio_chr-printable',
					'query' => "SELECT `bio_chr`.`id` as 'id', `bio_chr`.`img` as 'img', IF(    CHAR_LENGTH(`bio_author1`.`id`) || CHAR_LENGTH(`bio_author1`.`author_memberid`), CONCAT_WS('',   `bio_author1`.`id`, '   ', `bio_author1`.`author_memberid`), '') as 'author_id', IF(    CHAR_LENGTH(`bio_author1`.`last_name`) || CHAR_LENGTH(`bio_author1`.`first_name`), CONCAT_WS('',   `bio_author1`.`last_name`, ', ', `bio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`game_agent1`.`id`) || CHAR_LENGTH(`game_agent1`.`memberID`), CONCAT_WS('',   `game_agent1`.`id`, '   ', `game_agent1`.`memberID`), '') as 'agent_id', IF(    CHAR_LENGTH(`game_agent1`.`last_name`) || CHAR_LENGTH(`game_agent1`.`first_name`), CONCAT_WS('',   `game_agent1`.`last_name`, ', ', `game_agent1`.`first_name`), '') as 'agent_name', IF(    CHAR_LENGTH(`bio_story1`.`id`) || CHAR_LENGTH(`bio_story1`.`story_title`), CONCAT_WS('',   `bio_story1`.`id`, ' - ', `bio_story1`.`story_title`), '') as 'bio_story', IF(    CHAR_LENGTH(`class_dramatica_character1`.`character`), CONCAT_WS('',   `class_dramatica_character1`.`character`), '') as 'bio_character', IF(    CHAR_LENGTH(`class_dramatica_archetype1`.`archetype`), CONCAT_WS('',   `class_dramatica_archetype1`.`archetype`, ' '), '') as 'bio_archetype', `bio_chr`.`character_name` as 'character_name', `bio_chr`.`role` as 'role', `bio_chr`.`comment` as 'comment' FROM `bio_chr` LEFT JOIN `bio_author` as bio_author1 ON `bio_author1`.`id`=`bio_chr`.`author_id` LEFT JOIN `game_agent` as game_agent1 ON `game_agent1`.`id`=`bio_chr`.`agent_id` LEFT JOIN `bio_story` as bio_story1 ON `bio_story1`.`id`=`bio_chr`.`bio_story` LEFT JOIN `class_dramatica_character` as class_dramatica_character1 ON `class_dramatica_character1`.`id`=`bio_chr`.`bio_character` LEFT JOIN `class_dramatica_archetype` as class_dramatica_archetype1 ON `class_dramatica_archetype1`.`id`=`bio_chr`.`bio_archetype` "
				],
			],
			'bio_chr_dev' => [
			],
			'bio_chr_scene' => [
			],
			'bio_storyline' => [
				'biography' => [
					'parent-table' => 'bio_story',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Storylines <span class="hidden child-label-bio_storyline child-field-caption">(Biograf&#237;a)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/chart_curve_edit.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'Biograf&#237;a', 2 => 'ID autor', 3 => 'Nombre de autor', 4 => 'Bibliograf&#237;a', 5 => 'Transcripci&#243;n', 6 => 'Secuencia de token', 7 => 'Token', 8 => 'Acto', 9 => 'Secuencia', 10 => 'Personaje', 11 => 'Rol', 12 => 'L&#237;nea de trama n&#186;', 13 => 'Parent&#233;tesis', 14 => 'T&#237;tulo de la l&#237;nea', 15 => 'L&#237;nea de trama (Storyline)', 16 => 'Notas', 17 => 'N&#186; escena Storyweaving', 18 => 'Escena Storyweaving', 19 => 'Secuencia Storyweaving', 20 => 'Tema Storyweaving', 21 => 'Escena de de personaje', 22 => 'Evento de personaje', 23 => 'Fecha inicio', 24 => 'Fecha final'),
					'display-field-names' => array(0 => 'id', 1 => 'biography', 2 => 'author_id', 3 => 'author_name', 4 => 'bibliography', 5 => 'transcript', 6 => 'token_sequence', 7 => 'token', 8 => 'story_act', 9 => 'sequence', 10 => 'character', 11 => 'role', 12 => 'storyline_no', 13 => 'parenthetic', 14 => 'storyline_title', 15 => 'storyline', 16 => 'notes', 17 => 'storyweaving_scene_no', 18 => 'storyweaving_scene', 19 => 'storyweaving_sequence', 20 => 'storyweaving_theme', 21 => 'character_scene', 22 => 'character_event', 23 => 'startdate', 24 => 'enddate'),
					'sortable-fields' => array(0 => '`bio_storyline`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => 5, 5 => 6, 6 => 7, 7 => '`biblio_token1`.`token`', 8 => '`class_story_acts1`.`act`', 9 => 10, 10 => 11, 11 => 12, 12 => 13, 13 => 14, 14 => 15, 15 => 16, 16 => 17, 17 => 18, 18 => '`bio_storyweaving_scene1`.`id`', 19 => '`bio_storyweaving_scene1`.`sequence`', 20 => 21, 21 => 22, 22 => 23, 23 => 24, 24 => 25),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-bio_storyline',
					'template-printable' => 'children-bio_storyline-printable',
					'query' => "SELECT `bio_storyline`.`id` as 'id', IF(    CHAR_LENGTH(`bio_story1`.`id`) || CHAR_LENGTH(`bio_story1`.`story_title`), CONCAT_WS('',   `bio_story1`.`id`, ' -  ', `bio_story1`.`story_title`), '') as 'biography', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') as 'author_id', IF(    CHAR_LENGTH(`biblio_author1`.`last_name`) || CHAR_LENGTH(`biblio_author1`.`first_name`), CONCAT_WS('',   `biblio_author1`.`last_name`, ', ', `biblio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`biblio_doc1`.`id`) || CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`id`, ' - ', `biblio_doc1`.`title`), '') as 'bibliography', IF(    CHAR_LENGTH(`biblio_transcript1`.`id`) || CHAR_LENGTH(`biblio_transcript1`.`transcript_title`), CONCAT_WS('',   `biblio_transcript1`.`id`, ' - ', `biblio_transcript1`.`transcript_title`), '') as 'transcript', IF(    CHAR_LENGTH(`biblio_token1`.`id`) || CHAR_LENGTH(`biblio_token1`.`token_sequence`), CONCAT_WS('',   `biblio_token1`.`id`, ' - ', `biblio_token1`.`token_sequence`), '') as 'token_sequence', IF(    CHAR_LENGTH(`biblio_token1`.`token`), CONCAT_WS('',   `biblio_token1`.`token`), '') as 'token', IF(    CHAR_LENGTH(`class_story_acts1`.`act`), CONCAT_WS('',   `class_story_acts1`.`act`), '') as 'story_act', `bio_storyline`.`sequence` as 'sequence', IF(    CHAR_LENGTH(`game_agent1`.`id`) || CHAR_LENGTH(`game_agent1`.`memberID`) || CHAR_LENGTH(`game_agent1`.`last_name`) || CHAR_LENGTH(`game_agent1`.`first_name`), CONCAT_WS('',   `game_agent1`.`id`, '   ', `game_agent1`.`memberID`, `game_agent1`.`last_name`, ', ', `game_agent1`.`first_name`), '') as 'character', IF(    CHAR_LENGTH(`class_dramatica_character1`.`character`) || CHAR_LENGTH(`bio_chr1`.`role`), CONCAT_WS('',   `class_dramatica_character1`.`character`, ' - ', `bio_chr1`.`role`), '') as 'role', `bio_storyline`.`storyline_no` as 'storyline_no', `bio_storyline`.`parenthetic` as 'parenthetic', `bio_storyline`.`storyline_title` as 'storyline_title', `bio_storyline`.`storyline` as 'storyline', `bio_storyline`.`notes` as 'notes', IF(    CHAR_LENGTH(`class_dramatica_steps1`.`step`), CONCAT_WS('',   `class_dramatica_steps1`.`step`), '') as 'storyweaving_scene_no', IF(    CHAR_LENGTH(`bio_storyweaving_scene1`.`id`), CONCAT_WS('',   `bio_storyweaving_scene1`.`id`), '') as 'storyweaving_scene', IF(    CHAR_LENGTH(`bio_storyweaving_scene1`.`sequence`), CONCAT_WS('',   `bio_storyweaving_scene1`.`sequence`), '') as 'storyweaving_sequence', IF(    CHAR_LENGTH(`class_dramatica_themes1`.`theme`), CONCAT_WS('',   `class_dramatica_themes1`.`theme`), '') as 'storyweaving_theme', IF(    CHAR_LENGTH(`bio_chr_scene1`.`id`) || CHAR_LENGTH(`bio_chr_scene1`.`scene`), CONCAT_WS('',   `bio_chr_scene1`.`id`, '   ', `bio_chr_scene1`.`scene`), '') as 'character_scene', IF(    CHAR_LENGTH(`bio_encounter1`.`id`) || CHAR_LENGTH(`bio_encounter1`.`story_scene`), CONCAT_WS('',   `bio_encounter1`.`id`, '   ', `bio_encounter1`.`story_scene`), '') as 'character_event', IF(    CHAR_LENGTH(if(`biblio_code_invivo1`.`start_date`,date_format(`biblio_code_invivo1`.`start_date`,'%d/%m/%Y %H:%i'),'')) || CHAR_LENGTH(if(`biblio_code_invivo1`.`end_date`,date_format(`biblio_code_invivo1`.`end_date`,'%d/%m/%Y %H:%i'),'')), CONCAT_WS('',   if(`biblio_code_invivo1`.`start_date`,date_format(`biblio_code_invivo1`.`start_date`,'%d/%m/%Y %H:%i'),''), ' - ', if(`biblio_code_invivo1`.`end_date`,date_format(`biblio_code_invivo1`.`end_date`,'%d/%m/%Y %H:%i'),'')), '') as 'startdate', IF(    CHAR_LENGTH(`bio_chr_scene1`.`enddate`), CONCAT_WS('',   `bio_chr_scene1`.`enddate`), '') as 'enddate' FROM `bio_storyline` LEFT JOIN `bio_story` as bio_story1 ON `bio_story1`.`id`=`bio_storyline`.`biography` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`bio_storyline`.`author_id` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`bio_storyline`.`bibliography` LEFT JOIN `biblio_transcript` as biblio_transcript1 ON `biblio_transcript1`.`id`=`bio_storyline`.`transcript` LEFT JOIN `biblio_token` as biblio_token1 ON `biblio_token1`.`id`=`bio_storyline`.`token` LEFT JOIN `class_story_acts` as class_story_acts1 ON `class_story_acts1`.`id`=`bio_storyline`.`story_act` LEFT JOIN `bio_chr` as bio_chr1 ON `bio_chr1`.`id`=`bio_storyline`.`character` LEFT JOIN `game_agent` as game_agent1 ON `game_agent1`.`id`=`bio_chr1`.`agent_id` LEFT JOIN `bio_storyweaving_scene` as bio_storyweaving_scene1 ON `bio_storyweaving_scene1`.`id`=`bio_storyline`.`storyweaving_scene_no` LEFT JOIN `class_dramatica_steps` as class_dramatica_steps1 ON `class_dramatica_steps1`.`id`=`bio_storyweaving_scene1`.`step` LEFT JOIN `bio_chr_scene` as bio_chr_scene1 ON `bio_chr_scene1`.`id`=`bio_storyline`.`character_scene` LEFT JOIN `bio_encounter_scene` as bio_encounter_scene1 ON `bio_encounter_scene1`.`id`=`bio_storyline`.`character_event` LEFT JOIN `bio_encounter` as bio_encounter1 ON `bio_encounter1`.`id`=`bio_encounter_scene1`.`scene` LEFT JOIN `class_dramatica_character` as class_dramatica_character1 ON `class_dramatica_character1`.`id`=`bio_chr1`.`bio_character` LEFT JOIN `class_dramatica_themes` as class_dramatica_themes1 ON `class_dramatica_themes1`.`id`=`bio_storyweaving_scene1`.`theme` LEFT JOIN `biblio_code_invivo` as biblio_code_invivo1 ON `biblio_code_invivo1`.`id`=`bio_chr_scene1`.`startdate` "
				],
			],
			'bio_storystatic' => [
			],
			'bio_storydynamic' => [
			],
			'bio_storyweaving_scene' => [
			],
			'bio_encounter' => [
			],
			'bio_encounter_scene' => [
			],
			'bio_code_herme' => [
				'token_sequence' => [
					'parent-table' => 'biblio_token',
					'parent-primary-key' => 'id',
					'child-primary-key' => 'id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Hermeneutic <span class="hidden child-label-bio_code_herme child-field-caption">(Secuencia de token)</span>',
					'auto-close' => true,
					'table-icon' => 'resources/table_icons/book_next.png',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(0 => 'ID', 1 => 'Biograf&#237;a', 2 => 'ID agente', 3 => 'Nombre de agente', 4 => 'ID autor', 5 => 'Nombre de autor', 6 => 'Bibliograf&#237;a', 7 => 'Transcripci&#243;n', 8 => 'Secuencia de token', 9 => 'Token', 10 => 'An&#225;lisis hermen&#233;utico', 11 => 'Impresi&#243;n', 12 => 'Tensi&#243;n no&#233;tica', 13 => 'Cuadrilema', 14 => 'Contradicci&#243;n performativa', 15 => 'Contrafactuales', 16 => 'Objetivo de Desarollo Sostenible', 17 => 'Dilemma', 18 => 'Objetivos positivos', 19 => 'Comentario'),
					'display-field-names' => array(0 => 'id', 1 => 'biography', 2 => 'agent_id', 3 => 'agent_name', 4 => 'author_id', 5 => 'author_name', 6 => 'bibliography', 7 => 'transcript', 8 => 'token_sequence', 9 => 'token', 10 => 'hermeneutic', 11 => 'impression', 12 => 'noetictension', 13 => 'quadrilemma', 14 => 'pc', 15 => 'counterfactual', 16 => 'bio_sdg', 17 => 'bio_dilemma', 18 => 'bio_goals', 19 => 'freecode'),
					'sortable-fields' => array(0 => '`bio_code_herme`.`id`', 1 => 2, 2 => 3, 3 => 4, 4 => 5, 5 => 6, 6 => 7, 7 => 8, 8 => 9, 9 => '`biblio_token1`.`token`', 10 => 11, 11 => '`class_im1`.`impression`', 12 => '`class_nt1`.`noetictension`', 13 => 14, 14 => '`class_pc1`.`perform_contrad`', 15 => '`class_counterfactual1`.`counterfactual`', 16 => 17, 17 => '`class_dilemma1`.`defense`', 18 => '`class_goals1`.`id`', 19 => 20),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-bio_code_herme',
					'template-printable' => 'children-bio_code_herme-printable',
					'query' => "SELECT `bio_code_herme`.`id` as 'id', IF(    CHAR_LENGTH(`bio_story1`.`id`) || CHAR_LENGTH(`bio_story1`.`story_title`), CONCAT_WS('',   `bio_story1`.`id`, ' - ', `bio_story1`.`story_title`), '') as 'biography', IF(    CHAR_LENGTH(`game_agent1`.`id`) || CHAR_LENGTH(`game_agent1`.`memberID`), CONCAT_WS('',   `game_agent1`.`id`, '   ', `game_agent1`.`memberID`), '') as 'agent_id', IF(    CHAR_LENGTH(`game_agent1`.`last_name`) || CHAR_LENGTH(`game_agent1`.`first_name`), CONCAT_WS('',   `game_agent1`.`last_name`, ', ', `game_agent1`.`first_name`), '') as 'agent_name', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`id`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`id`), '') as 'author_id', IF(    CHAR_LENGTH(`biblio_author1`.`last_name`) || CHAR_LENGTH(`biblio_author1`.`first_name`), CONCAT_WS('',   `biblio_author1`.`last_name`, ', ', `biblio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`biblio_doc1`.`id`) || CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`id`, '   ', `biblio_doc1`.`title`), '') as 'bibliography', IF(    CHAR_LENGTH(`biblio_transcript1`.`id`) || CHAR_LENGTH(`biblio_transcript1`.`transcript_title`), CONCAT_WS('',   `biblio_transcript1`.`id`, '   ', `biblio_transcript1`.`transcript_title`), '') as 'transcript', IF(    CHAR_LENGTH(`biblio_token1`.`id`) || CHAR_LENGTH(`biblio_token1`.`token_sequence`), CONCAT_WS('',   `biblio_token1`.`id`, ' - ', `biblio_token1`.`token_sequence`), '') as 'token_sequence', IF(    CHAR_LENGTH(`biblio_token1`.`token`), CONCAT_WS('',   `biblio_token1`.`token`), '') as 'token', `bio_code_herme`.`hermeneutic` as 'hermeneutic', IF(    CHAR_LENGTH(`class_im1`.`impression`), CONCAT_WS('',   `class_im1`.`impression`), '') as 'impression', IF(    CHAR_LENGTH(`class_nt1`.`noetictension`), CONCAT_WS('',   `class_nt1`.`noetictension`), '') as 'noetictension', `bio_code_herme`.`quadrilemma` as 'quadrilemma', IF(    CHAR_LENGTH(`class_pc1`.`perform_contrad`), CONCAT_WS('',   `class_pc1`.`perform_contrad`), '') as 'pc', IF(    CHAR_LENGTH(`class_counterfactual1`.`counterfactual`), CONCAT_WS('',   `class_counterfactual1`.`counterfactual`), '') as 'counterfactual', IF(    CHAR_LENGTH(`class_sdg1`.`no`) || CHAR_LENGTH(`class_sdg1`.`sdg_topic`), CONCAT_WS('',   `class_sdg1`.`no`, '   ', `class_sdg1`.`sdg_topic`), '') as 'bio_sdg', IF(    CHAR_LENGTH(`class_dilemma1`.`defense`), CONCAT_WS('',   `class_dilemma1`.`defense`), '') as 'bio_dilemma', IF(    CHAR_LENGTH(`class_goals1`.`id`), CONCAT_WS('',   `class_goals1`.`id`), '') as 'bio_goals', `bio_code_herme`.`freecode` as 'freecode' FROM `bio_code_herme` LEFT JOIN `bio_story` as bio_story1 ON `bio_story1`.`id`=`bio_code_herme`.`biography` LEFT JOIN `game_agent` as game_agent1 ON `game_agent1`.`id`=`bio_code_herme`.`agent_id` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`bio_code_herme`.`author_id` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`bio_code_herme`.`bibliography` LEFT JOIN `biblio_transcript` as biblio_transcript1 ON `biblio_transcript1`.`id`=`bio_code_herme`.`transcript` LEFT JOIN `biblio_token` as biblio_token1 ON `biblio_token1`.`id`=`bio_code_herme`.`token_sequence` LEFT JOIN `class_im` as class_im1 ON `class_im1`.`id`=`bio_code_herme`.`impression` LEFT JOIN `class_nt` as class_nt1 ON `class_nt1`.`id`=`bio_code_herme`.`noetictension` LEFT JOIN `class_pc` as class_pc1 ON `class_pc1`.`id`=`bio_code_herme`.`pc` LEFT JOIN `class_counterfactual` as class_counterfactual1 ON `class_counterfactual1`.`id`=`bio_code_herme`.`counterfactual` LEFT JOIN `class_sdg` as class_sdg1 ON `class_sdg1`.`id`=`bio_code_herme`.`bio_sdg` LEFT JOIN `class_dilemma` as class_dilemma1 ON `class_dilemma1`.`id`=`bio_code_herme`.`bio_dilemma` LEFT JOIN `class_goals` as class_goals1 ON `class_goals1`.`id`=`bio_code_herme`.`bio_goals` "
				],
			],
			'hist_team' => [
			],
			'hist_author' => [
			],
			'hist_story' => [
			],
			'hist_chr' => [
			],
			'hist_chr_dev' => [
			],
			'hist_chr_scene' => [
			],
			'hist_storyline' => [
			],
			'hist_storystatic' => [
			],
			'hist_storydynamic' => [
			],
			'hist_storyweaving_scene' => [
			],
			'hist_encounter' => [
			],
			'hist_encounter_scene' => [
			],
			'encounter_team' => [
			],
			'ecounter_analyst' => [
			],
			'hist_community' => [
			],
			'class_agent_selection' => [
			],
			'class_agent_type1' => [
			],
			'class_agent_type2' => [
			],
			'class_character_element' => [
			],
			'class_gender' => [
			],
			'class_agent_race' => [
			],
			'class_agent_religion' => [
			],
			'class_agent_job' => [
			],
			'class_agent_party' => [
			],
			'class_agent_status' => [
			],
			'class_authority_agent' => [
			],
			'class_evaluation' => [
			],
			'class_bibliography_type' => [
			],
			'class_bibliography_media' => [
			],
			'class_bibliography_genre' => [
			],
			'class_authority_library' => [
			],
			'class_rights' => [
			],
			'class_language' => [
			],
			'class_story_collab_type' => [
			],
			'class_story_acts' => [
			],
			'class_story_path' => [
			],
			'class_dramatica_steps' => [
			],
			'class_dramatica_throughline' => [
			],
			'class_dramatica_signpost' => [
			],
			'class_dramatica_domain' => [
			],
			'class_dramatica_concern' => [
			],
			'class_dramatica_issue' => [
			],
			'class_dramatica_themes' => [
			],
			'class_dramatica_archetype' => [
			],
			'class_dramatica_character' => [
			],
			'class_dynamicstorypoints1' => [
			],
			'class_dynamicstorypoints2' => [
			],
			'class_dynamicstorypoints3' => [
			],
			'class_dynamicstorypoints4' => [
			],
			'class_im' => [
			],
			'class_pc' => [
			],
			'class_nt' => [
			],
			'class_dilemma' => [
			],
			'class_cuadrilemma' => [
			],
			'class_sdg' => [
			],
			'class_sdg_intgr' => [
			],
			'class_goals' => [
			],
			'class_counterfactual' => [
			],
			'dictionary' => [
			],
			'class_dictionary1' => [
			],
			'class_dictionary2' => [
			],
			'class_dictionary3' => [
			],
			'class_dictionary4' => [
			],
			'class_dictionary5' => [
			],
			'assignments' => [
				'ProjectId' => [
					'parent-table' => 'projects',
					'parent-primary-key' => 'Id',
					'child-primary-key' => 'Id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Chrono events <span class="hidden child-label-assignments child-field-caption">(ProjectId)</span>',
					'auto-close' => false,
					'table-icon' => 'table.gif',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(1 => 'ProjectId', 2 => 'ProjectDuration', 3 => 'RessourceId', 4 => 'Committment', 5 => 'Author', 6 => 'Author name', 7 => 'Biblio doc', 8 => 'Biblio trascript', 9 => 'Biblio token', 10 => 'Invivio code', 11 => 'StartDate', 12 => 'EndDate'),
					'display-field-names' => array(1 => 'ProjectId', 2 => 'ProjectDuration', 3 => 'RessourceId', 4 => 'Commitment', 5 => 'author_id', 6 => 'author_name', 7 => 'biblio_doc', 8 => 'biblio_trascript', 9 => 'biblio_token', 10 => 'invivio_code', 11 => 'StartDate', 12 => 'EndDate'),
					'sortable-fields' => array(0 => '`assignments`.`Id`', 1 => '`projects1`.`Name`', 2 => 3, 3 => 4, 4 => '`assignments`.`Commitment`', 5 => 6, 6 => 7, 7 => 8, 8 => 9, 9 => 10, 10 => 11, 11 => 'date_format(`biblio_code_invivo2`.`start_date`,\'%d/%m/%Y %H:%i\')', 12 => 'date_format(`biblio_code_invivo1`.`end_date`,\'%d/%m/%Y %H:%i\')'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-assignments',
					'template-printable' => 'children-assignments-printable',
					'query' => "SELECT `assignments`.`Id` as 'Id', IF(    CHAR_LENGTH(`projects1`.`Name`), CONCAT_WS('',   `projects1`.`Name`), '') as 'ProjectId', IF(    CHAR_LENGTH(if(`projects1`.`StartDate`,date_format(`projects1`.`StartDate`,'%d/%m/%Y %H:%i'),'')) || CHAR_LENGTH(if(`projects1`.`EndDate`,date_format(`projects1`.`EndDate`,'%d/%m/%Y %H:%i'),'')), CONCAT_WS('',   if(`projects1`.`StartDate`,date_format(`projects1`.`StartDate`,'%d/%m/%Y %H:%i'),''), ' <b>to</b> ', if(`projects1`.`EndDate`,date_format(`projects1`.`EndDate`,'%d/%m/%Y %H:%i'),'')), '') as 'ProjectDuration', IF(    CHAR_LENGTH(`resources1`.`Name`), CONCAT_WS('',   `resources1`.`Name`), '') as 'RessourceId', `assignments`.`Commitment` as 'Commitment', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') as 'author_id', IF(    CHAR_LENGTH(`biblio_author1`.`last_name`) || CHAR_LENGTH(`biblio_author1`.`first_name`), CONCAT_WS('',   `biblio_author1`.`last_name`, ', ', `biblio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`biblio_doc1`.`id`) || CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`id`, '   ', `biblio_doc1`.`title`), '') as 'biblio_doc', IF(    CHAR_LENGTH(`biblio_transcript1`.`id`) || CHAR_LENGTH(`biblio_transcript1`.`transcript_title`), CONCAT_WS('',   `biblio_transcript1`.`id`, '   ', `biblio_transcript1`.`transcript_title`), '') as 'biblio_trascript', IF(    CHAR_LENGTH(`biblio_token1`.`id`) || CHAR_LENGTH(`biblio_token1`.`token`), CONCAT_WS('',   `biblio_token1`.`id`, ' - ', `biblio_token1`.`token`), '') as 'biblio_token', IF(    CHAR_LENGTH(`biblio_code_invivo1`.`id`) || CHAR_LENGTH(`biblio_code_invivo1`.`token`), CONCAT_WS('',   `biblio_code_invivo1`.`id`, ' - ', `biblio_code_invivo1`.`token`), '') as 'invivio_code', IF(    CHAR_LENGTH(if(`biblio_code_invivo2`.`start_date`,date_format(`biblio_code_invivo2`.`start_date`,'%d/%m/%Y %H:%i'),'')), CONCAT_WS('',   if(`biblio_code_invivo2`.`start_date`,date_format(`biblio_code_invivo2`.`start_date`,'%d/%m/%Y %H:%i'),'')), '') as 'StartDate', IF(    CHAR_LENGTH(if(`biblio_code_invivo1`.`end_date`,date_format(`biblio_code_invivo1`.`end_date`,'%d/%m/%Y %H:%i'),'')), CONCAT_WS('',   if(`biblio_code_invivo1`.`end_date`,date_format(`biblio_code_invivo1`.`end_date`,'%d/%m/%Y %H:%i'),'')), '') as 'EndDate' FROM `assignments` LEFT JOIN `projects` as projects1 ON `projects1`.`Id`=`assignments`.`ProjectId` LEFT JOIN `resources` as resources1 ON `resources1`.`Id`=`assignments`.`RessourceId` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`assignments`.`author_id` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`assignments`.`biblio_doc` LEFT JOIN `biblio_transcript` as biblio_transcript1 ON `biblio_transcript1`.`id`=`assignments`.`biblio_trascript` LEFT JOIN `biblio_token` as biblio_token1 ON `biblio_token1`.`id`=`assignments`.`biblio_token` LEFT JOIN `biblio_code_invivo` as biblio_code_invivo1 ON `biblio_code_invivo1`.`id`=`assignments`.`invivio_code` LEFT JOIN `biblio_code_invivo` as biblio_code_invivo2 ON `biblio_code_invivo2`.`id`=`assignments`.`StartDate` "
				],
				'RessourceId' => [
					'parent-table' => 'resources',
					'parent-primary-key' => 'Id',
					'child-primary-key' => 'Id',
					'child-primary-key-index' => 0,
					'tab-label' => 'Chrono events <span class="hidden child-label-assignments child-field-caption">(RessourceId)</span>',
					'auto-close' => false,
					'table-icon' => 'table.gif',
					'display-refresh' => true,
					'display-add-new' => true,
					'forced-where' => '',
					'display-fields' => array(1 => 'ProjectId', 2 => 'ProjectDuration', 3 => 'RessourceId', 4 => 'Committment', 5 => 'Author', 6 => 'Author name', 7 => 'Biblio doc', 8 => 'Biblio trascript', 9 => 'Biblio token', 10 => 'Invivio code', 11 => 'StartDate', 12 => 'EndDate'),
					'display-field-names' => array(1 => 'ProjectId', 2 => 'ProjectDuration', 3 => 'RessourceId', 4 => 'Commitment', 5 => 'author_id', 6 => 'author_name', 7 => 'biblio_doc', 8 => 'biblio_trascript', 9 => 'biblio_token', 10 => 'invivio_code', 11 => 'StartDate', 12 => 'EndDate'),
					'sortable-fields' => array(0 => '`assignments`.`Id`', 1 => '`projects1`.`Name`', 2 => 3, 3 => 4, 4 => '`assignments`.`Commitment`', 5 => 6, 6 => 7, 7 => 8, 8 => 9, 9 => 10, 10 => 11, 11 => 'date_format(`biblio_code_invivo2`.`start_date`,\'%d/%m/%Y %H:%i\')', 12 => 'date_format(`biblio_code_invivo1`.`end_date`,\'%d/%m/%Y %H:%i\')'),
					'records-per-page' => 10,
					'default-sort-by' => false,
					'default-sort-direction' => 'asc',
					'open-detail-view-on-click' => true,
					'display-page-selector' => true,
					'show-page-progress' => true,
					'template' => 'children-assignments',
					'template-printable' => 'children-assignments-printable',
					'query' => "SELECT `assignments`.`Id` as 'Id', IF(    CHAR_LENGTH(`projects1`.`Name`), CONCAT_WS('',   `projects1`.`Name`), '') as 'ProjectId', IF(    CHAR_LENGTH(if(`projects1`.`StartDate`,date_format(`projects1`.`StartDate`,'%d/%m/%Y %H:%i'),'')) || CHAR_LENGTH(if(`projects1`.`EndDate`,date_format(`projects1`.`EndDate`,'%d/%m/%Y %H:%i'),'')), CONCAT_WS('',   if(`projects1`.`StartDate`,date_format(`projects1`.`StartDate`,'%d/%m/%Y %H:%i'),''), ' <b>to</b> ', if(`projects1`.`EndDate`,date_format(`projects1`.`EndDate`,'%d/%m/%Y %H:%i'),'')), '') as 'ProjectDuration', IF(    CHAR_LENGTH(`resources1`.`Name`), CONCAT_WS('',   `resources1`.`Name`), '') as 'RessourceId', `assignments`.`Commitment` as 'Commitment', IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') as 'author_id', IF(    CHAR_LENGTH(`biblio_author1`.`last_name`) || CHAR_LENGTH(`biblio_author1`.`first_name`), CONCAT_WS('',   `biblio_author1`.`last_name`, ', ', `biblio_author1`.`first_name`), '') as 'author_name', IF(    CHAR_LENGTH(`biblio_doc1`.`id`) || CHAR_LENGTH(`biblio_doc1`.`title`), CONCAT_WS('',   `biblio_doc1`.`id`, '   ', `biblio_doc1`.`title`), '') as 'biblio_doc', IF(    CHAR_LENGTH(`biblio_transcript1`.`id`) || CHAR_LENGTH(`biblio_transcript1`.`transcript_title`), CONCAT_WS('',   `biblio_transcript1`.`id`, '   ', `biblio_transcript1`.`transcript_title`), '') as 'biblio_trascript', IF(    CHAR_LENGTH(`biblio_token1`.`id`) || CHAR_LENGTH(`biblio_token1`.`token`), CONCAT_WS('',   `biblio_token1`.`id`, ' - ', `biblio_token1`.`token`), '') as 'biblio_token', IF(    CHAR_LENGTH(`biblio_code_invivo1`.`id`) || CHAR_LENGTH(`biblio_code_invivo1`.`token`), CONCAT_WS('',   `biblio_code_invivo1`.`id`, ' - ', `biblio_code_invivo1`.`token`), '') as 'invivio_code', IF(    CHAR_LENGTH(if(`biblio_code_invivo2`.`start_date`,date_format(`biblio_code_invivo2`.`start_date`,'%d/%m/%Y %H:%i'),'')), CONCAT_WS('',   if(`biblio_code_invivo2`.`start_date`,date_format(`biblio_code_invivo2`.`start_date`,'%d/%m/%Y %H:%i'),'')), '') as 'StartDate', IF(    CHAR_LENGTH(if(`biblio_code_invivo1`.`end_date`,date_format(`biblio_code_invivo1`.`end_date`,'%d/%m/%Y %H:%i'),'')), CONCAT_WS('',   if(`biblio_code_invivo1`.`end_date`,date_format(`biblio_code_invivo1`.`end_date`,'%d/%m/%Y %H:%i'),'')), '') as 'EndDate' FROM `assignments` LEFT JOIN `projects` as projects1 ON `projects1`.`Id`=`assignments`.`ProjectId` LEFT JOIN `resources` as resources1 ON `resources1`.`Id`=`assignments`.`RessourceId` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`assignments`.`author_id` LEFT JOIN `biblio_doc` as biblio_doc1 ON `biblio_doc1`.`id`=`assignments`.`biblio_doc` LEFT JOIN `biblio_transcript` as biblio_transcript1 ON `biblio_transcript1`.`id`=`assignments`.`biblio_trascript` LEFT JOIN `biblio_token` as biblio_token1 ON `biblio_token1`.`id`=`assignments`.`biblio_token` LEFT JOIN `biblio_code_invivo` as biblio_code_invivo1 ON `biblio_code_invivo1`.`id`=`assignments`.`invivio_code` LEFT JOIN `biblio_code_invivo` as biblio_code_invivo2 ON `biblio_code_invivo2`.`id`=`assignments`.`StartDate` "
				],
			],
			'resources' => [
			],
			'projects' => [
			],
			'gallery_authors' => [
			],
		];

	/*************************************/
	/* End of configuration */


	$currDir = dirname(__FILE__);
	include_once("{$currDir}/lib.php");
	@header('Content-Type: text/html; charset=' . datalist_db_encoding);

	handle_maintenance();

	/**
	* dynamic configuration based on current user's permissions
	* $userPCConfig array is populated only with parent tables where the user has access to
	* at least one child table
	*/
	$userPCConfig = [];
	foreach($pcConfig as $pcChildTable => $ChildrenLookups) {
		$permChild = getTablePermissions($pcChildTable);
		if(!$permChild['view']) continue;

		foreach($ChildrenLookups as $ChildLookupField => $ChildConfig) {
			$permParent = getTablePermissions($ChildConfig['parent-table']);
			if(!$permParent['view']) continue;

			$userPCConfig[$pcChildTable][$ChildLookupField] = $pcConfig[$pcChildTable][$ChildLookupField];
			// show add new only if configured above AND the user has insert permission
			$userPCConfig[$pcChildTable][$ChildLookupField]['display-add-new'] = ($permChild['insert'] && $pcConfig[$pcChildTable][$ChildLookupField]['display-add-new']);
		}
	}

	/* Receive, UTF-convert, and validate parameters */
	$ParentTable = $_REQUEST['ParentTable']; // needed only with operation=show-children, will be validated in the processing code
	$ChildTable = $_REQUEST['ChildTable'];
		if(!in_array($ChildTable, array_keys($userPCConfig))) {
			/* defaults to first child table in config array if not provided */
			$ChildTable = current(array_keys($userPCConfig));
		}
		if(!$ChildTable) { die('<!-- No tables accessible to current user -->'); }
	$SelectedID = strip_tags($_REQUEST['SelectedID']);
	$ChildLookupField = $_REQUEST['ChildLookupField'];
		if(!in_array($ChildLookupField, array_keys($userPCConfig[$ChildTable]))) {
			/* defaults to first lookup in current child config array if not provided */
			$ChildLookupField = current(array_keys($userPCConfig[$ChildTable]));
		}
	$Page = intval($_REQUEST['Page']);
		if($Page < 1) {
			$Page = 1;
		}
	$SortBy = ($_REQUEST['SortBy'] != '' ? abs(intval($_REQUEST['SortBy'])) : false);
		if(!in_array($SortBy, array_keys($userPCConfig[$ChildTable][$ChildLookupField]['sortable-fields']), true)) {
			$SortBy = $userPCConfig[$ChildTable][$ChildLookupField]['default-sort-by'];
		}
	$SortDirection = strtolower($_REQUEST['SortDirection']);
		if(!in_array($SortDirection, array('asc', 'desc'))) {
			$SortDirection = $userPCConfig[$ChildTable][$ChildLookupField]['default-sort-direction'];
		}
	$Operation = strtolower($_REQUEST['Operation']);
		if(!in_array($Operation, array('get-records', 'show-children', 'get-records-printable', 'show-children-printable'))) {
			$Operation = 'get-records';
		}

	/* process requested operation */
	switch($Operation) {
		/************************************************/
		case 'show-children':
			/* populate HTML and JS content with children tabs */
			$tabLabels = $tabPanels = $tabLoaders = '';
			foreach($userPCConfig as $ChildTable => $childLookups) {
				foreach($childLookups as $ChildLookupField => $childConfig) {
					if($childConfig['parent-table'] == $ParentTable) {
						$TableIcon = ($childConfig['table-icon'] ? "<img src=\"{$childConfig['table-icon']}\" border=\"0\">" : '');
						$tabLabels .= sprintf('<li class="child-tab-label child-table-%s lookup-field-%s %s"><a href="#panel_%s-%s" id="tab_%s-%s" data-toggle="tab">%s%s</a></li>' . "\n\t\t\t\t\t", $ChildTable, $ChildLookupField, ($tabLabels ? '' : 'active'), $ChildTable, $ChildLookupField, $ChildTable, $ChildLookupField, $TableIcon, $childConfig['tab-label']);
						$tabPanels .= sprintf('<div id="panel_%s-%s" class="tab-pane%s"><i class="glyphicon glyphicon-refresh loop-rotate"></i> %s</div>' . "\n\t\t\t\t", $ChildTable, $ChildLookupField, ($tabPanels ? '' : ' active'), $Translation['Loading ...']);
						$tabLoaders .= sprintf('post("parent-children.php", { ChildTable: "%s", ChildLookupField: "%s", SelectedID: "%s", Page: 1, SortBy: "", SortDirection: "", Operation: "get-records" }, "panel_%s-%s");' . "\n\t\t\t\t", $ChildTable, $ChildLookupField, addslashes($SelectedID), $ChildTable, $ChildLookupField);
					}
				}
			}

			if(!$tabLabels) { die('<!-- no children of current parent table are accessible to current user -->'); }
			?>
			<div id="children-tabs">
				<ul class="nav nav-tabs">
					<?php echo $tabLabels; ?>
				</ul>
				<span id="pc-loading"></span>
			</div>
			<div class="tab-content"><?php echo $tabPanels; ?></div>

			<script>
				$j(function() {
					/* for iOS, avoid loading child tabs in modals */
					var iOS = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
					var embedded = ($j('.navbar').length == 0);
					if(iOS && embedded) {
						$j('#children-tabs').next('.tab-content').remove();
						$j('#children-tabs').remove();
						return;
					}

					/* ajax loading of each tab's contents */
					<?php echo $tabLoaders; ?>

					/* show child field caption on tab title in case the same child table appears more than once */
					$j('.child-field-caption').each(function() {
						var clss = $j(this).attr('class').split(/\s+/).reduce(function(rc, cc) {
							return (cc.match(/child-label-.*/) ? '.' + cc : rc);
						}, '');

						// if class occurs more than once, remove .hidden
						if($j(clss).length > 1) $j(clss).removeClass('hidden');
					})
				})
			</script>
			<?php
			break;

		/************************************************/
		case 'show-children-printable':
			/* populate HTML and JS content with children buttons */
			$tabLabels = $tabPanels = $tabLoaders = '';
			foreach($userPCConfig as $ChildTable => $childLookups) {
				foreach($childLookups as $ChildLookupField => $childConfig) {
					if($childConfig['parent-table'] == $ParentTable) {
						$TableIcon = ($childConfig['table-icon'] ? "<img src=\"{$childConfig['table-icon']}\" border=\"0\">" : '');
						$tabLabels .= sprintf('<button type="button" class="btn btn-default child-tab-print-toggler" data-target="#panel_%s-%s" id="tab_%s-%s" data-toggle="collapse">%s %s</button>' . "\n\t\t\t\t\t", $ChildTable, $ChildLookupField, $ChildTable, $ChildLookupField, $TableIcon, $childConfig['tab-label']);
						$tabPanels .= sprintf('<div id="panel_%s-%s" class="collapse child-panel-print"><i class="glyphicon glyphicon-refresh loop-rotate"></i> %s</div>' . "\n\t\t\t\t", $ChildTable, $ChildLookupField, $Translation['Loading ...']);
						$tabLoaders .= sprintf('post("parent-children.php", { ChildTable: "%s", ChildLookupField: "%s", SelectedID: "%s", Page: 1, SortBy: "", SortDirection: "", Operation: "get-records-printable" }, "panel_%s-%s");' . "\n\t\t\t\t", $ChildTable, $ChildLookupField, addslashes($SelectedID), $ChildTable, $ChildLookupField);
					}
				}
			}

			if(!$tabLabels) { die('<!-- no children of current parent table are accessible to current user -->'); }
			?>
			<div id="children-tabs" class="hidden-print">
				<div class="btn-group btn-group-lg">
					<?php echo $tabLabels; ?>
				</div>
				<span id="pc-loading"></span>
			</div>
			<div class="vspacer-lg"><?php echo $tabPanels; ?></div>

			<script>
				$j(function() {
					/* for iOS, avoid loading child tabs in modals */
					var iOS = /(iPad|iPhone|iPod)/g.test(navigator.userAgent);
					var embedded = ($j('.navbar').length == 0);
					if(iOS && embedded) {
						$j('#children-tabs').next('.tab-content').remove();
						$j('#children-tabs').remove();
						return;
					}

					/* ajax loading of each tab's contents */
					<?php echo $tabLoaders; ?>
				})
			</script>
			<?php
			break;

		/************************************************/
		case 'get-records-printable':
		default: /* default is 'get-records' */

			if($Operation == 'get-records-printable') {
				$userPCConfig[$ChildTable][$ChildLookupField]['records-per-page'] = 2000;
			}

			// build the user permissions limiter
			$permissionsWhere = $permissionsJoin = '';
			$permChild = getTablePermissions($ChildTable);
			if($permChild['view'] == 1) { // user can view only his own records
				$permissionsWhere = "`$ChildTable`.`{$userPCConfig[$ChildTable][$ChildLookupField]['child-primary-key']}`=`membership_userrecords`.`pkValue` AND `membership_userrecords`.`tableName`='$ChildTable' AND LCASE(`membership_userrecords`.`memberID`)='" . getLoggedMemberID() . "'";
			} elseif($permChild['view'] == 2) { // user can view only his group's records
				$permissionsWhere = "`$ChildTable`.`{$userPCConfig[$ChildTable][$ChildLookupField]['child-primary-key']}`=`membership_userrecords`.`pkValue` AND `membership_userrecords`.`tableName`='$ChildTable' AND `membership_userrecords`.`groupID`='" . getLoggedGroupID() . "'";
			} elseif($permChild['view'] == 3) { // user can view all records
				/* that's the only case remaining ... no need to modify the query in this case */
			}
			$permissionsJoin = ($permissionsWhere ? ", `membership_userrecords`" : '');

			// build the count query
			$forcedWhere = $userPCConfig[$ChildTable][$ChildLookupField]['forced-where'];
			$query = 
				preg_replace('/^select .* from /i', 'SELECT count(1) FROM ', $userPCConfig[$ChildTable][$ChildLookupField]['query']) .
				$permissionsJoin . " WHERE " .
				($permissionsWhere ? "( $permissionsWhere )" : "( 1=1 )") . " AND " .
				($forcedWhere ? "( $forcedWhere )" : "( 2=2 )") . " AND " .
				"`$ChildTable`.`$ChildLookupField`='" . makeSafe($SelectedID) . "'";
			$totalMatches = sqlValue($query);

			// make sure $Page is <= max pages
			$maxPage = ceil($totalMatches / $userPCConfig[$ChildTable][$ChildLookupField]['records-per-page']);
			if($Page > $maxPage) { $Page = $maxPage; }

			// initiate output data array
			$data = array(
				'config' => $userPCConfig[$ChildTable][$ChildLookupField],
				'parameters' => array(
					'ChildTable' => $ChildTable,
					'ChildLookupField' => $ChildLookupField,
					'SelectedID' => $SelectedID,
					'Page' => $Page,
					'SortBy' => $SortBy,
					'SortDirection' => $SortDirection,
					'Operation' => $Operation
				),
				'records' => [],
				'totalMatches' => $totalMatches
			);

			// build the data query
			if($totalMatches) { // if we have at least one record, proceed with fetching data
				$startRecord = $userPCConfig[$ChildTable][$ChildLookupField]['records-per-page'] * ($Page - 1);
				$data['query'] = 
					$userPCConfig[$ChildTable][$ChildLookupField]['query'] .
					$permissionsJoin . " WHERE " .
					($permissionsWhere ? "( $permissionsWhere )" : "( 1=1 )") . " AND " .
					($forcedWhere ? "( $forcedWhere )" : "( 2=2 )") . " AND " .
					"`$ChildTable`.`$ChildLookupField`='" . makeSafe($SelectedID) . "'" . 
					($SortBy !== false && $userPCConfig[$ChildTable][$ChildLookupField]['sortable-fields'][$SortBy] ? " ORDER BY {$userPCConfig[$ChildTable][$ChildLookupField]['sortable-fields'][$SortBy]} $SortDirection" : '') .
					" LIMIT $startRecord, {$userPCConfig[$ChildTable][$ChildLookupField]['records-per-page']}";
				$res = sql($data['query'], $eo);
				while($row = db_fetch_row($res)) {
					$data['records'][$row[$userPCConfig[$ChildTable][$ChildLookupField]['child-primary-key-index']]] = $row;
				}
			} else { // if no matching records
				$startRecord = 0;
			}

			if($Operation == 'get-records-printable') {
				$response = loadView($userPCConfig[$ChildTable][$ChildLookupField]['template-printable'], $data);
			} else {
				$response = loadView($userPCConfig[$ChildTable][$ChildLookupField]['template'], $data);
			}

			// change name space to ensure uniqueness
			$uniqueNameSpace = $ChildTable.ucfirst($ChildLookupField).'GetRecords';
			echo str_replace("{$ChildTable}GetChildrenRecordsList", $uniqueNameSpace, $response);
		/************************************************/
	}
