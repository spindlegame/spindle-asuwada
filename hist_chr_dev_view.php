<?php
// This script and data application were generated by AppGini 5.94
// Download AppGini for free from https://bigprof.com/appgini/download/

	$currDir = dirname(__FILE__);
	include_once("{$currDir}/lib.php");
	@include_once("{$currDir}/hooks/hist_chr_dev.php");
	include_once("{$currDir}/hist_chr_dev_dml.php");

	// mm: can the current member access this page?
	$perm = getTablePermissions('hist_chr_dev');
	if(!$perm['access']) {
		echo error_message($Translation['tableAccessDenied'], false);
		echo '<script>setTimeout(function() { window.location = "index.php?signOut=1"; }, 2000);</script>';
		exit;
	}

	$x = new DataList;
	$x->TableName = 'hist_chr_dev';

	// Fields that can be displayed in the table view
	$x->QueryFieldsTV = [
		"`hist_chr_dev`.`id`" => "id",
		"IF(    CHAR_LENGTH(`hist_story1`.`id`) || CHAR_LENGTH(`hist_story1`.`story_title`), CONCAT_WS('',   `hist_story1`.`id`, ' - ', `hist_story1`.`story_title`), '') /* Historia */" => "hist_story",
		"IF(    CHAR_LENGTH(`bio_story1`.`id`) || CHAR_LENGTH(`bio_story1`.`story_title`), CONCAT_WS('',   `bio_story1`.`id`, ' - ', `bio_story1`.`story_title`), '') /* Biograf&#237;a */" => "bio_story",
		"IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') /* ID autor */" => "agent_id",
		"IF(    CHAR_LENGTH(`class_dramatica_character1`.`character`) || CHAR_LENGTH(`hist_chr1`.`agent_name`), CONCAT_WS('',   `class_dramatica_character1`.`character`, ', ', `hist_chr1`.`agent_name`), '') /* Nombre de autor */" => "agent_name",
		"IF(    CHAR_LENGTH(`hist_chr2`.`character_name`), CONCAT_WS('',   `hist_chr2`.`character_name`), '') /* Nombre de personaje */" => "cw_name",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints11`.`term`), CONCAT_WS('',   `class_dynamicstorypoints11`.`term`), '') /* Punto din&#225;mico categor&#237;a 1 */" => "dp1_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints21`.`term`), CONCAT_WS('',   `class_dynamicstorypoints21`.`term`), '') /* Punto din&#225;mico categor&#237;a 2 */" => "dp2_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints31`.`term`), CONCAT_WS('',   `class_dynamicstorypoints31`.`term`), '') /* Punto din&#225;mico categor&#237;a 3 */" => "dp3_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints41`.`term`), CONCAT_WS('',   `class_dynamicstorypoints41`.`term`), '') /* Resoluci&#243;n de personaje principal */" => "mc_resolve",
		"IF(    CHAR_LENGTH(`hist_chr_scene1`.`id`) || CHAR_LENGTH(`hist_chr_scene1`.`illustration`), CONCAT_WS('',   `hist_chr_scene1`.`id`, ' - ', `hist_chr_scene1`.`illustration`), '') /* Ilustraci&#243;n de la resoluci&#243;n */" => "illust_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints32`.`term`), CONCAT_WS('',   `class_dynamicstorypoints32`.`term`), '') /* Punto din&#225;mico Crecimiento */" => "dp3_growth",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints42`.`term`), CONCAT_WS('',   `class_dynamicstorypoints42`.`term`), '') /* Crecimiento de personaje principal */" => "mc_growth",
		"IF(    CHAR_LENGTH(`hist_chr_scene2`.`id`) || CHAR_LENGTH(`hist_chr_scene2`.`illustration`), CONCAT_WS('',   `hist_chr_scene2`.`id`, ' - ', `hist_chr_scene2`.`illustration`), '') /* Ilustraci&#243;n del crecimiento */" => "illust_growth",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints33`.`term`), CONCAT_WS('',   `class_dynamicstorypoints33`.`term`), '') /* Punto din&#225;mico Enfoque */" => "dp3_approach",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints43`.`term`), CONCAT_WS('',   `class_dynamicstorypoints43`.`term`), '') /* Enfoque de personaje principal */" => "mc_approach",
		"IF(    CHAR_LENGTH(`hist_chr_scene3`.`id`) || CHAR_LENGTH(`hist_chr_scene3`.`illustration`), CONCAT_WS('',   `hist_chr_scene3`.`id`, ' - ', `hist_chr_scene3`.`illustration`), '') /* Ilustraci&#243;n del enfoque */" => "illust_approach",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints34`.`term`), CONCAT_WS('',   `class_dynamicstorypoints34`.`term`), '') /* Punto din&#225;mico estilo de resolver problemas */" => "dp3_psstyle",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints44`.`term`), CONCAT_WS('',   `class_dynamicstorypoints44`.`term`), '') /* Estilo de resolver problemas de personaje principal */" => "mc_ps_style",
		"IF(    CHAR_LENGTH(`hist_chr_scene4`.`id`) || CHAR_LENGTH(`hist_chr_scene4`.`illustration`), CONCAT_WS('',   `hist_chr_scene4`.`id`, ' - ', `hist_chr_scene4`.`illustration`), '') /* Ilustraci&#243;n del estilo de resolver problemas */" => "illust_ps_style",
		"`hist_chr_dev`.`cw_age`" => "cw_age",
		"IF(    CHAR_LENGTH(`class_gender1`.`gender`), CONCAT_WS('',   `class_gender1`.`gender`), '') /* G&#233;nero del personaje */" => "cw_gender",
		"`hist_chr_dev`.`cw_communication_style`" => "cw_communication_style",
		"`hist_chr_dev`.`cw_background`" => "cw_background",
		"`hist_chr_dev`.`cw_appearance`" => "cw_appearance",
		"`hist_chr_dev`.`cw_relationships`" => "cw_relationships",
		"`hist_chr_dev`.`cw_ambition`" => "cw_ambition",
		"`hist_chr_dev`.`cw_defects`" => "cw_defects",
		"`hist_chr_dev`.`cw_thoughts`" => "cw_thoughts",
		"`hist_chr_dev`.`cw_relatedness`" => "cw_relatedness",
		"`hist_chr_dev`.`cw_restrictions`" => "cw_restrictions",
		"`hist_chr_dev`.`locations`" => "locations",
		"`hist_chr_dev`.`persons`" => "persons",
		"`hist_chr_dev`.`events`" => "events",
		"IF(    CHAR_LENGTH(`class_nt1`.`noetictension`), CONCAT_WS('',   `class_nt1`.`noetictension`), '') /* Tensi&#243;n no&#233;tica principal */" => "noetictension",
		"IF(    CHAR_LENGTH(`hist_chr_scene5`.`id`) || CHAR_LENGTH(`hist_chr_scene5`.`illustration`), CONCAT_WS('',   `hist_chr_scene5`.`id`, ' - ', `hist_chr_scene5`.`illustration`), '') /* Ilustraci&#243;n de la tens&#237;on no&#233;tica */" => "illust_nt",
		"IF(    CHAR_LENGTH(`class_im1`.`impression`), CONCAT_WS('',   `class_im1`.`impression`), '') /* Gesti&#243;n general de impresiones */" => "impression",
		"IF(    CHAR_LENGTH(`hist_chr_scene6`.`id`) || CHAR_LENGTH(`hist_chr_scene6`.`illustration`), CONCAT_WS('',   `hist_chr_scene6`.`id`, ' - ', `hist_chr_scene6`.`illustration`), '') /* Ilustraci&#243;n de la gesti&#243;n de impresi&#243;n */" => "illust_im",
		"IF(    CHAR_LENGTH(`class_dramatica_themes1`.`theme`), CONCAT_WS('',   `class_dramatica_themes1`.`theme`), '') /* Problema MCS */" => "mcs_problem",
		"IF(    CHAR_LENGTH(`hist_chr_scene7`.`id`) || CHAR_LENGTH(`hist_chr_scene7`.`illustration`), CONCAT_WS('',   `hist_chr_scene7`.`id`, ' - ', `hist_chr_scene7`.`illustration`), '') /* Ilustraci&#243;n de problema */" => "illust_mcs_problem",
		"IF(    CHAR_LENGTH(`class_dramatica_themes2`.`theme`), CONCAT_WS('',   `class_dramatica_themes2`.`theme`), '') /* Soluci&#243;n MCS */" => "mcs_solution",
		"IF(    CHAR_LENGTH(`hist_chr_scene8`.`id`) || CHAR_LENGTH(`hist_chr_scene8`.`illustration`), CONCAT_WS('',   `hist_chr_scene8`.`id`, ' - ', `hist_chr_scene8`.`illustration`), '') /* Ilustraci&#243;n de soluci&#243;n */" => "illust_mcs_solution",
		"IF(    CHAR_LENGTH(`class_dramatica_themes3`.`theme`), CONCAT_WS('',   `class_dramatica_themes3`.`theme`), '') /* S&#237;ntoma */" => "mcs_symptom",
		"IF(    CHAR_LENGTH(`hist_chr_scene9`.`id`) || CHAR_LENGTH(`hist_chr_scene9`.`illustration`), CONCAT_WS('',   `hist_chr_scene9`.`id`, ' - ', `hist_chr_scene9`.`illustration`), '') /* Ilustraci&#243;n de s&#237;ntoma */" => "illust_mcs_symptom",
		"IF(    CHAR_LENGTH(`class_dramatica_themes4`.`theme`), CONCAT_WS('',   `class_dramatica_themes4`.`theme`), '') /* Respuesta */" => "mcs_response",
		"IF(    CHAR_LENGTH(`hist_chr_scene10`.`id`) || CHAR_LENGTH(`hist_chr_scene10`.`illustration`), CONCAT_WS('',   `hist_chr_scene10`.`id`, ' - ', `hist_chr_scene10`.`illustration`), '') /* Illustration of MCS Response */" => "illust_mcs_response",
	];
	// mapping incoming sort by requests to actual query fields
	$x->SortFields = [
		1 => '`hist_chr_dev`.`id`',
		2 => 2,
		3 => 3,
		4 => 4,
		5 => 5,
		6 => '`hist_chr2`.`character_name`',
		7 => '`class_dynamicstorypoints11`.`term`',
		8 => '`class_dynamicstorypoints21`.`term`',
		9 => '`class_dynamicstorypoints31`.`term`',
		10 => '`class_dynamicstorypoints41`.`term`',
		11 => 11,
		12 => '`class_dynamicstorypoints32`.`term`',
		13 => '`class_dynamicstorypoints42`.`term`',
		14 => 14,
		15 => '`class_dynamicstorypoints33`.`term`',
		16 => '`class_dynamicstorypoints43`.`term`',
		17 => 17,
		18 => '`class_dynamicstorypoints34`.`term`',
		19 => '`class_dynamicstorypoints44`.`term`',
		20 => 20,
		21 => 21,
		22 => '`class_gender1`.`gender`',
		23 => 23,
		24 => 24,
		25 => 25,
		26 => 26,
		27 => 27,
		28 => 28,
		29 => 29,
		30 => 30,
		31 => 31,
		32 => 32,
		33 => 33,
		34 => 34,
		35 => '`class_nt1`.`noetictension`',
		36 => 36,
		37 => '`class_im1`.`impression`',
		38 => 38,
		39 => 39,
		40 => 40,
		41 => 41,
		42 => 42,
		43 => 43,
		44 => 44,
		45 => 45,
		46 => 46,
	];

	// Fields that can be displayed in the csv file
	$x->QueryFieldsCSV = [
		"`hist_chr_dev`.`id`" => "id",
		"IF(    CHAR_LENGTH(`hist_story1`.`id`) || CHAR_LENGTH(`hist_story1`.`story_title`), CONCAT_WS('',   `hist_story1`.`id`, ' - ', `hist_story1`.`story_title`), '') /* Historia */" => "hist_story",
		"IF(    CHAR_LENGTH(`bio_story1`.`id`) || CHAR_LENGTH(`bio_story1`.`story_title`), CONCAT_WS('',   `bio_story1`.`id`, ' - ', `bio_story1`.`story_title`), '') /* Biograf&#237;a */" => "bio_story",
		"IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') /* ID autor */" => "agent_id",
		"IF(    CHAR_LENGTH(`class_dramatica_character1`.`character`) || CHAR_LENGTH(`hist_chr1`.`agent_name`), CONCAT_WS('',   `class_dramatica_character1`.`character`, ', ', `hist_chr1`.`agent_name`), '') /* Nombre de autor */" => "agent_name",
		"IF(    CHAR_LENGTH(`hist_chr2`.`character_name`), CONCAT_WS('',   `hist_chr2`.`character_name`), '') /* Nombre de personaje */" => "cw_name",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints11`.`term`), CONCAT_WS('',   `class_dynamicstorypoints11`.`term`), '') /* Punto din&#225;mico categor&#237;a 1 */" => "dp1_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints21`.`term`), CONCAT_WS('',   `class_dynamicstorypoints21`.`term`), '') /* Punto din&#225;mico categor&#237;a 2 */" => "dp2_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints31`.`term`), CONCAT_WS('',   `class_dynamicstorypoints31`.`term`), '') /* Punto din&#225;mico categor&#237;a 3 */" => "dp3_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints41`.`term`), CONCAT_WS('',   `class_dynamicstorypoints41`.`term`), '') /* Resoluci&#243;n de personaje principal */" => "mc_resolve",
		"IF(    CHAR_LENGTH(`hist_chr_scene1`.`id`) || CHAR_LENGTH(`hist_chr_scene1`.`illustration`), CONCAT_WS('',   `hist_chr_scene1`.`id`, ' - ', `hist_chr_scene1`.`illustration`), '') /* Ilustraci&#243;n de la resoluci&#243;n */" => "illust_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints32`.`term`), CONCAT_WS('',   `class_dynamicstorypoints32`.`term`), '') /* Punto din&#225;mico Crecimiento */" => "dp3_growth",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints42`.`term`), CONCAT_WS('',   `class_dynamicstorypoints42`.`term`), '') /* Crecimiento de personaje principal */" => "mc_growth",
		"IF(    CHAR_LENGTH(`hist_chr_scene2`.`id`) || CHAR_LENGTH(`hist_chr_scene2`.`illustration`), CONCAT_WS('',   `hist_chr_scene2`.`id`, ' - ', `hist_chr_scene2`.`illustration`), '') /* Ilustraci&#243;n del crecimiento */" => "illust_growth",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints33`.`term`), CONCAT_WS('',   `class_dynamicstorypoints33`.`term`), '') /* Punto din&#225;mico Enfoque */" => "dp3_approach",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints43`.`term`), CONCAT_WS('',   `class_dynamicstorypoints43`.`term`), '') /* Enfoque de personaje principal */" => "mc_approach",
		"IF(    CHAR_LENGTH(`hist_chr_scene3`.`id`) || CHAR_LENGTH(`hist_chr_scene3`.`illustration`), CONCAT_WS('',   `hist_chr_scene3`.`id`, ' - ', `hist_chr_scene3`.`illustration`), '') /* Ilustraci&#243;n del enfoque */" => "illust_approach",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints34`.`term`), CONCAT_WS('',   `class_dynamicstorypoints34`.`term`), '') /* Punto din&#225;mico estilo de resolver problemas */" => "dp3_psstyle",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints44`.`term`), CONCAT_WS('',   `class_dynamicstorypoints44`.`term`), '') /* Estilo de resolver problemas de personaje principal */" => "mc_ps_style",
		"IF(    CHAR_LENGTH(`hist_chr_scene4`.`id`) || CHAR_LENGTH(`hist_chr_scene4`.`illustration`), CONCAT_WS('',   `hist_chr_scene4`.`id`, ' - ', `hist_chr_scene4`.`illustration`), '') /* Ilustraci&#243;n del estilo de resolver problemas */" => "illust_ps_style",
		"`hist_chr_dev`.`cw_age`" => "cw_age",
		"IF(    CHAR_LENGTH(`class_gender1`.`gender`), CONCAT_WS('',   `class_gender1`.`gender`), '') /* G&#233;nero del personaje */" => "cw_gender",
		"`hist_chr_dev`.`cw_communication_style`" => "cw_communication_style",
		"`hist_chr_dev`.`cw_background`" => "cw_background",
		"`hist_chr_dev`.`cw_appearance`" => "cw_appearance",
		"`hist_chr_dev`.`cw_relationships`" => "cw_relationships",
		"`hist_chr_dev`.`cw_ambition`" => "cw_ambition",
		"`hist_chr_dev`.`cw_defects`" => "cw_defects",
		"`hist_chr_dev`.`cw_thoughts`" => "cw_thoughts",
		"`hist_chr_dev`.`cw_relatedness`" => "cw_relatedness",
		"`hist_chr_dev`.`cw_restrictions`" => "cw_restrictions",
		"`hist_chr_dev`.`locations`" => "locations",
		"`hist_chr_dev`.`persons`" => "persons",
		"`hist_chr_dev`.`events`" => "events",
		"IF(    CHAR_LENGTH(`class_nt1`.`noetictension`), CONCAT_WS('',   `class_nt1`.`noetictension`), '') /* Tensi&#243;n no&#233;tica principal */" => "noetictension",
		"IF(    CHAR_LENGTH(`hist_chr_scene5`.`id`) || CHAR_LENGTH(`hist_chr_scene5`.`illustration`), CONCAT_WS('',   `hist_chr_scene5`.`id`, ' - ', `hist_chr_scene5`.`illustration`), '') /* Ilustraci&#243;n de la tens&#237;on no&#233;tica */" => "illust_nt",
		"IF(    CHAR_LENGTH(`class_im1`.`impression`), CONCAT_WS('',   `class_im1`.`impression`), '') /* Gesti&#243;n general de impresiones */" => "impression",
		"IF(    CHAR_LENGTH(`hist_chr_scene6`.`id`) || CHAR_LENGTH(`hist_chr_scene6`.`illustration`), CONCAT_WS('',   `hist_chr_scene6`.`id`, ' - ', `hist_chr_scene6`.`illustration`), '') /* Ilustraci&#243;n de la gesti&#243;n de impresi&#243;n */" => "illust_im",
		"IF(    CHAR_LENGTH(`class_dramatica_themes1`.`theme`), CONCAT_WS('',   `class_dramatica_themes1`.`theme`), '') /* Problema MCS */" => "mcs_problem",
		"IF(    CHAR_LENGTH(`hist_chr_scene7`.`id`) || CHAR_LENGTH(`hist_chr_scene7`.`illustration`), CONCAT_WS('',   `hist_chr_scene7`.`id`, ' - ', `hist_chr_scene7`.`illustration`), '') /* Ilustraci&#243;n de problema */" => "illust_mcs_problem",
		"IF(    CHAR_LENGTH(`class_dramatica_themes2`.`theme`), CONCAT_WS('',   `class_dramatica_themes2`.`theme`), '') /* Soluci&#243;n MCS */" => "mcs_solution",
		"IF(    CHAR_LENGTH(`hist_chr_scene8`.`id`) || CHAR_LENGTH(`hist_chr_scene8`.`illustration`), CONCAT_WS('',   `hist_chr_scene8`.`id`, ' - ', `hist_chr_scene8`.`illustration`), '') /* Ilustraci&#243;n de soluci&#243;n */" => "illust_mcs_solution",
		"IF(    CHAR_LENGTH(`class_dramatica_themes3`.`theme`), CONCAT_WS('',   `class_dramatica_themes3`.`theme`), '') /* S&#237;ntoma */" => "mcs_symptom",
		"IF(    CHAR_LENGTH(`hist_chr_scene9`.`id`) || CHAR_LENGTH(`hist_chr_scene9`.`illustration`), CONCAT_WS('',   `hist_chr_scene9`.`id`, ' - ', `hist_chr_scene9`.`illustration`), '') /* Ilustraci&#243;n de s&#237;ntoma */" => "illust_mcs_symptom",
		"IF(    CHAR_LENGTH(`class_dramatica_themes4`.`theme`), CONCAT_WS('',   `class_dramatica_themes4`.`theme`), '') /* Respuesta */" => "mcs_response",
		"IF(    CHAR_LENGTH(`hist_chr_scene10`.`id`) || CHAR_LENGTH(`hist_chr_scene10`.`illustration`), CONCAT_WS('',   `hist_chr_scene10`.`id`, ' - ', `hist_chr_scene10`.`illustration`), '') /* Illustration of MCS Response */" => "illust_mcs_response",
	];
	// Fields that can be filtered
	$x->QueryFieldsFilters = [
		"`hist_chr_dev`.`id`" => "ID",
		"IF(    CHAR_LENGTH(`hist_story1`.`id`) || CHAR_LENGTH(`hist_story1`.`story_title`), CONCAT_WS('',   `hist_story1`.`id`, ' - ', `hist_story1`.`story_title`), '') /* Historia */" => "Historia",
		"IF(    CHAR_LENGTH(`bio_story1`.`id`) || CHAR_LENGTH(`bio_story1`.`story_title`), CONCAT_WS('',   `bio_story1`.`id`, ' - ', `bio_story1`.`story_title`), '') /* Biograf&#237;a */" => "Biograf&#237;a",
		"IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') /* ID autor */" => "ID autor",
		"IF(    CHAR_LENGTH(`class_dramatica_character1`.`character`) || CHAR_LENGTH(`hist_chr1`.`agent_name`), CONCAT_WS('',   `class_dramatica_character1`.`character`, ', ', `hist_chr1`.`agent_name`), '') /* Nombre de autor */" => "Nombre de autor",
		"IF(    CHAR_LENGTH(`hist_chr2`.`character_name`), CONCAT_WS('',   `hist_chr2`.`character_name`), '') /* Nombre de personaje */" => "Nombre de personaje",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints11`.`term`), CONCAT_WS('',   `class_dynamicstorypoints11`.`term`), '') /* Punto din&#225;mico categor&#237;a 1 */" => "Punto din&#225;mico categor&#237;a 1",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints21`.`term`), CONCAT_WS('',   `class_dynamicstorypoints21`.`term`), '') /* Punto din&#225;mico categor&#237;a 2 */" => "Punto din&#225;mico categor&#237;a 2",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints31`.`term`), CONCAT_WS('',   `class_dynamicstorypoints31`.`term`), '') /* Punto din&#225;mico categor&#237;a 3 */" => "Punto din&#225;mico categor&#237;a 3",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints41`.`term`), CONCAT_WS('',   `class_dynamicstorypoints41`.`term`), '') /* Resoluci&#243;n de personaje principal */" => "Resoluci&#243;n de personaje principal",
		"IF(    CHAR_LENGTH(`hist_chr_scene1`.`id`) || CHAR_LENGTH(`hist_chr_scene1`.`illustration`), CONCAT_WS('',   `hist_chr_scene1`.`id`, ' - ', `hist_chr_scene1`.`illustration`), '') /* Ilustraci&#243;n de la resoluci&#243;n */" => "Ilustraci&#243;n de la resoluci&#243;n",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints32`.`term`), CONCAT_WS('',   `class_dynamicstorypoints32`.`term`), '') /* Punto din&#225;mico Crecimiento */" => "Punto din&#225;mico Crecimiento",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints42`.`term`), CONCAT_WS('',   `class_dynamicstorypoints42`.`term`), '') /* Crecimiento de personaje principal */" => "Crecimiento de personaje principal",
		"IF(    CHAR_LENGTH(`hist_chr_scene2`.`id`) || CHAR_LENGTH(`hist_chr_scene2`.`illustration`), CONCAT_WS('',   `hist_chr_scene2`.`id`, ' - ', `hist_chr_scene2`.`illustration`), '') /* Ilustraci&#243;n del crecimiento */" => "Ilustraci&#243;n del crecimiento",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints33`.`term`), CONCAT_WS('',   `class_dynamicstorypoints33`.`term`), '') /* Punto din&#225;mico Enfoque */" => "Punto din&#225;mico Enfoque",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints43`.`term`), CONCAT_WS('',   `class_dynamicstorypoints43`.`term`), '') /* Enfoque de personaje principal */" => "Enfoque de personaje principal",
		"IF(    CHAR_LENGTH(`hist_chr_scene3`.`id`) || CHAR_LENGTH(`hist_chr_scene3`.`illustration`), CONCAT_WS('',   `hist_chr_scene3`.`id`, ' - ', `hist_chr_scene3`.`illustration`), '') /* Ilustraci&#243;n del enfoque */" => "Ilustraci&#243;n del enfoque",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints34`.`term`), CONCAT_WS('',   `class_dynamicstorypoints34`.`term`), '') /* Punto din&#225;mico estilo de resolver problemas */" => "Punto din&#225;mico estilo de resolver problemas",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints44`.`term`), CONCAT_WS('',   `class_dynamicstorypoints44`.`term`), '') /* Estilo de resolver problemas de personaje principal */" => "Estilo de resolver problemas de personaje principal",
		"IF(    CHAR_LENGTH(`hist_chr_scene4`.`id`) || CHAR_LENGTH(`hist_chr_scene4`.`illustration`), CONCAT_WS('',   `hist_chr_scene4`.`id`, ' - ', `hist_chr_scene4`.`illustration`), '') /* Ilustraci&#243;n del estilo de resolver problemas */" => "Ilustraci&#243;n del estilo de resolver problemas",
		"`hist_chr_dev`.`cw_age`" => "Edad de personaje",
		"IF(    CHAR_LENGTH(`class_gender1`.`gender`), CONCAT_WS('',   `class_gender1`.`gender`), '') /* G&#233;nero del personaje */" => "G&#233;nero del personaje",
		"`hist_chr_dev`.`cw_communication_style`" => "Estilo de comunicaci&#243;n",
		"`hist_chr_dev`.`cw_background`" => "Antecendents",
		"`hist_chr_dev`.`cw_appearance`" => "Aspecto f&#237;sico",
		"`hist_chr_dev`.`cw_relationships`" => "Relaciones",
		"`hist_chr_dev`.`cw_ambition`" => "Ambiciones",
		"`hist_chr_dev`.`cw_defects`" => "Defectos",
		"`hist_chr_dev`.`cw_thoughts`" => "Ideas",
		"`hist_chr_dev`.`cw_relatedness`" => "Apego",
		"`hist_chr_dev`.`cw_restrictions`" => "Restricciones",
		"`hist_chr_dev`.`locations`" => "Lugar(es)",
		"`hist_chr_dev`.`persons`" => "Persona(s)",
		"`hist_chr_dev`.`events`" => "Eventos",
		"IF(    CHAR_LENGTH(`class_nt1`.`noetictension`), CONCAT_WS('',   `class_nt1`.`noetictension`), '') /* Tensi&#243;n no&#233;tica principal */" => "Tensi&#243;n no&#233;tica principal",
		"IF(    CHAR_LENGTH(`hist_chr_scene5`.`id`) || CHAR_LENGTH(`hist_chr_scene5`.`illustration`), CONCAT_WS('',   `hist_chr_scene5`.`id`, ' - ', `hist_chr_scene5`.`illustration`), '') /* Ilustraci&#243;n de la tens&#237;on no&#233;tica */" => "Ilustraci&#243;n de la tens&#237;on no&#233;tica",
		"IF(    CHAR_LENGTH(`class_im1`.`impression`), CONCAT_WS('',   `class_im1`.`impression`), '') /* Gesti&#243;n general de impresiones */" => "Gesti&#243;n general de impresiones",
		"IF(    CHAR_LENGTH(`hist_chr_scene6`.`id`) || CHAR_LENGTH(`hist_chr_scene6`.`illustration`), CONCAT_WS('',   `hist_chr_scene6`.`id`, ' - ', `hist_chr_scene6`.`illustration`), '') /* Ilustraci&#243;n de la gesti&#243;n de impresi&#243;n */" => "Ilustraci&#243;n de la gesti&#243;n de impresi&#243;n",
		"IF(    CHAR_LENGTH(`class_dramatica_themes1`.`theme`), CONCAT_WS('',   `class_dramatica_themes1`.`theme`), '') /* Problema MCS */" => "Problema MCS",
		"IF(    CHAR_LENGTH(`hist_chr_scene7`.`id`) || CHAR_LENGTH(`hist_chr_scene7`.`illustration`), CONCAT_WS('',   `hist_chr_scene7`.`id`, ' - ', `hist_chr_scene7`.`illustration`), '') /* Ilustraci&#243;n de problema */" => "Ilustraci&#243;n de problema",
		"IF(    CHAR_LENGTH(`class_dramatica_themes2`.`theme`), CONCAT_WS('',   `class_dramatica_themes2`.`theme`), '') /* Soluci&#243;n MCS */" => "Soluci&#243;n MCS",
		"IF(    CHAR_LENGTH(`hist_chr_scene8`.`id`) || CHAR_LENGTH(`hist_chr_scene8`.`illustration`), CONCAT_WS('',   `hist_chr_scene8`.`id`, ' - ', `hist_chr_scene8`.`illustration`), '') /* Ilustraci&#243;n de soluci&#243;n */" => "Ilustraci&#243;n de soluci&#243;n",
		"IF(    CHAR_LENGTH(`class_dramatica_themes3`.`theme`), CONCAT_WS('',   `class_dramatica_themes3`.`theme`), '') /* S&#237;ntoma */" => "S&#237;ntoma",
		"IF(    CHAR_LENGTH(`hist_chr_scene9`.`id`) || CHAR_LENGTH(`hist_chr_scene9`.`illustration`), CONCAT_WS('',   `hist_chr_scene9`.`id`, ' - ', `hist_chr_scene9`.`illustration`), '') /* Ilustraci&#243;n de s&#237;ntoma */" => "Ilustraci&#243;n de s&#237;ntoma",
		"IF(    CHAR_LENGTH(`class_dramatica_themes4`.`theme`), CONCAT_WS('',   `class_dramatica_themes4`.`theme`), '') /* Respuesta */" => "Respuesta",
		"IF(    CHAR_LENGTH(`hist_chr_scene10`.`id`) || CHAR_LENGTH(`hist_chr_scene10`.`illustration`), CONCAT_WS('',   `hist_chr_scene10`.`id`, ' - ', `hist_chr_scene10`.`illustration`), '') /* Illustration of MCS Response */" => "Illustration of MCS Response",
	];

	// Fields that can be quick searched
	$x->QueryFieldsQS = [
		"`hist_chr_dev`.`id`" => "id",
		"IF(    CHAR_LENGTH(`hist_story1`.`id`) || CHAR_LENGTH(`hist_story1`.`story_title`), CONCAT_WS('',   `hist_story1`.`id`, ' - ', `hist_story1`.`story_title`), '') /* Historia */" => "hist_story",
		"IF(    CHAR_LENGTH(`bio_story1`.`id`) || CHAR_LENGTH(`bio_story1`.`story_title`), CONCAT_WS('',   `bio_story1`.`id`, ' - ', `bio_story1`.`story_title`), '') /* Biograf&#237;a */" => "bio_story",
		"IF(    CHAR_LENGTH(`biblio_author1`.`id`) || CHAR_LENGTH(`biblio_author1`.`author_memberid`), CONCAT_WS('',   `biblio_author1`.`id`, '   ', `biblio_author1`.`author_memberid`), '') /* ID autor */" => "agent_id",
		"IF(    CHAR_LENGTH(`class_dramatica_character1`.`character`) || CHAR_LENGTH(`hist_chr1`.`agent_name`), CONCAT_WS('',   `class_dramatica_character1`.`character`, ', ', `hist_chr1`.`agent_name`), '') /* Nombre de autor */" => "agent_name",
		"IF(    CHAR_LENGTH(`hist_chr2`.`character_name`), CONCAT_WS('',   `hist_chr2`.`character_name`), '') /* Nombre de personaje */" => "cw_name",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints11`.`term`), CONCAT_WS('',   `class_dynamicstorypoints11`.`term`), '') /* Punto din&#225;mico categor&#237;a 1 */" => "dp1_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints21`.`term`), CONCAT_WS('',   `class_dynamicstorypoints21`.`term`), '') /* Punto din&#225;mico categor&#237;a 2 */" => "dp2_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints31`.`term`), CONCAT_WS('',   `class_dynamicstorypoints31`.`term`), '') /* Punto din&#225;mico categor&#237;a 3 */" => "dp3_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints41`.`term`), CONCAT_WS('',   `class_dynamicstorypoints41`.`term`), '') /* Resoluci&#243;n de personaje principal */" => "mc_resolve",
		"IF(    CHAR_LENGTH(`hist_chr_scene1`.`id`) || CHAR_LENGTH(`hist_chr_scene1`.`illustration`), CONCAT_WS('',   `hist_chr_scene1`.`id`, ' - ', `hist_chr_scene1`.`illustration`), '') /* Ilustraci&#243;n de la resoluci&#243;n */" => "illust_resolve",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints32`.`term`), CONCAT_WS('',   `class_dynamicstorypoints32`.`term`), '') /* Punto din&#225;mico Crecimiento */" => "dp3_growth",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints42`.`term`), CONCAT_WS('',   `class_dynamicstorypoints42`.`term`), '') /* Crecimiento de personaje principal */" => "mc_growth",
		"IF(    CHAR_LENGTH(`hist_chr_scene2`.`id`) || CHAR_LENGTH(`hist_chr_scene2`.`illustration`), CONCAT_WS('',   `hist_chr_scene2`.`id`, ' - ', `hist_chr_scene2`.`illustration`), '') /* Ilustraci&#243;n del crecimiento */" => "illust_growth",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints33`.`term`), CONCAT_WS('',   `class_dynamicstorypoints33`.`term`), '') /* Punto din&#225;mico Enfoque */" => "dp3_approach",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints43`.`term`), CONCAT_WS('',   `class_dynamicstorypoints43`.`term`), '') /* Enfoque de personaje principal */" => "mc_approach",
		"IF(    CHAR_LENGTH(`hist_chr_scene3`.`id`) || CHAR_LENGTH(`hist_chr_scene3`.`illustration`), CONCAT_WS('',   `hist_chr_scene3`.`id`, ' - ', `hist_chr_scene3`.`illustration`), '') /* Ilustraci&#243;n del enfoque */" => "illust_approach",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints34`.`term`), CONCAT_WS('',   `class_dynamicstorypoints34`.`term`), '') /* Punto din&#225;mico estilo de resolver problemas */" => "dp3_psstyle",
		"IF(    CHAR_LENGTH(`class_dynamicstorypoints44`.`term`), CONCAT_WS('',   `class_dynamicstorypoints44`.`term`), '') /* Estilo de resolver problemas de personaje principal */" => "mc_ps_style",
		"IF(    CHAR_LENGTH(`hist_chr_scene4`.`id`) || CHAR_LENGTH(`hist_chr_scene4`.`illustration`), CONCAT_WS('',   `hist_chr_scene4`.`id`, ' - ', `hist_chr_scene4`.`illustration`), '') /* Ilustraci&#243;n del estilo de resolver problemas */" => "illust_ps_style",
		"`hist_chr_dev`.`cw_age`" => "cw_age",
		"IF(    CHAR_LENGTH(`class_gender1`.`gender`), CONCAT_WS('',   `class_gender1`.`gender`), '') /* G&#233;nero del personaje */" => "cw_gender",
		"`hist_chr_dev`.`cw_communication_style`" => "cw_communication_style",
		"`hist_chr_dev`.`cw_background`" => "cw_background",
		"`hist_chr_dev`.`cw_appearance`" => "cw_appearance",
		"`hist_chr_dev`.`cw_relationships`" => "cw_relationships",
		"`hist_chr_dev`.`cw_ambition`" => "cw_ambition",
		"`hist_chr_dev`.`cw_defects`" => "cw_defects",
		"`hist_chr_dev`.`cw_thoughts`" => "cw_thoughts",
		"`hist_chr_dev`.`cw_relatedness`" => "cw_relatedness",
		"`hist_chr_dev`.`cw_restrictions`" => "cw_restrictions",
		"`hist_chr_dev`.`locations`" => "locations",
		"`hist_chr_dev`.`persons`" => "persons",
		"`hist_chr_dev`.`events`" => "events",
		"IF(    CHAR_LENGTH(`class_nt1`.`noetictension`), CONCAT_WS('',   `class_nt1`.`noetictension`), '') /* Tensi&#243;n no&#233;tica principal */" => "noetictension",
		"IF(    CHAR_LENGTH(`hist_chr_scene5`.`id`) || CHAR_LENGTH(`hist_chr_scene5`.`illustration`), CONCAT_WS('',   `hist_chr_scene5`.`id`, ' - ', `hist_chr_scene5`.`illustration`), '') /* Ilustraci&#243;n de la tens&#237;on no&#233;tica */" => "illust_nt",
		"IF(    CHAR_LENGTH(`class_im1`.`impression`), CONCAT_WS('',   `class_im1`.`impression`), '') /* Gesti&#243;n general de impresiones */" => "impression",
		"IF(    CHAR_LENGTH(`hist_chr_scene6`.`id`) || CHAR_LENGTH(`hist_chr_scene6`.`illustration`), CONCAT_WS('',   `hist_chr_scene6`.`id`, ' - ', `hist_chr_scene6`.`illustration`), '') /* Ilustraci&#243;n de la gesti&#243;n de impresi&#243;n */" => "illust_im",
		"IF(    CHAR_LENGTH(`class_dramatica_themes1`.`theme`), CONCAT_WS('',   `class_dramatica_themes1`.`theme`), '') /* Problema MCS */" => "mcs_problem",
		"IF(    CHAR_LENGTH(`hist_chr_scene7`.`id`) || CHAR_LENGTH(`hist_chr_scene7`.`illustration`), CONCAT_WS('',   `hist_chr_scene7`.`id`, ' - ', `hist_chr_scene7`.`illustration`), '') /* Ilustraci&#243;n de problema */" => "illust_mcs_problem",
		"IF(    CHAR_LENGTH(`class_dramatica_themes2`.`theme`), CONCAT_WS('',   `class_dramatica_themes2`.`theme`), '') /* Soluci&#243;n MCS */" => "mcs_solution",
		"IF(    CHAR_LENGTH(`hist_chr_scene8`.`id`) || CHAR_LENGTH(`hist_chr_scene8`.`illustration`), CONCAT_WS('',   `hist_chr_scene8`.`id`, ' - ', `hist_chr_scene8`.`illustration`), '') /* Ilustraci&#243;n de soluci&#243;n */" => "illust_mcs_solution",
		"IF(    CHAR_LENGTH(`class_dramatica_themes3`.`theme`), CONCAT_WS('',   `class_dramatica_themes3`.`theme`), '') /* S&#237;ntoma */" => "mcs_symptom",
		"IF(    CHAR_LENGTH(`hist_chr_scene9`.`id`) || CHAR_LENGTH(`hist_chr_scene9`.`illustration`), CONCAT_WS('',   `hist_chr_scene9`.`id`, ' - ', `hist_chr_scene9`.`illustration`), '') /* Ilustraci&#243;n de s&#237;ntoma */" => "illust_mcs_symptom",
		"IF(    CHAR_LENGTH(`class_dramatica_themes4`.`theme`), CONCAT_WS('',   `class_dramatica_themes4`.`theme`), '') /* Respuesta */" => "mcs_response",
		"IF(    CHAR_LENGTH(`hist_chr_scene10`.`id`) || CHAR_LENGTH(`hist_chr_scene10`.`illustration`), CONCAT_WS('',   `hist_chr_scene10`.`id`, ' - ', `hist_chr_scene10`.`illustration`), '') /* Illustration of MCS Response */" => "illust_mcs_response",
	];

	// Lookup fields that can be used as filterers
	$x->filterers = ['hist_story' => 'Historia', 'bio_story' => 'Biograf&#237;a', 'agent_id' => 'ID autor', 'agent_name' => 'Nombre de autor', 'cw_name' => 'Nombre de personaje', 'dp1_resolve' => 'Punto din&#225;mico categor&#237;a 1', 'dp2_resolve' => 'Punto din&#225;mico categor&#237;a 2', 'dp3_resolve' => 'Punto din&#225;mico categor&#237;a 3', 'mc_resolve' => 'Resoluci&#243;n de personaje principal', 'illust_resolve' => 'Ilustraci&#243;n de la resoluci&#243;n', 'dp3_growth' => 'Punto din&#225;mico Crecimiento', 'mc_growth' => 'Crecimiento de personaje principal', 'illust_growth' => 'Ilustraci&#243;n del crecimiento', 'dp3_approach' => 'Punto din&#225;mico Enfoque', 'mc_approach' => 'Enfoque de personaje principal', 'illust_approach' => 'Ilustraci&#243;n del enfoque', 'dp3_psstyle' => 'Punto din&#225;mico estilo de resolver problemas', 'mc_ps_style' => 'Estilo de resolver problemas de personaje principal', 'illust_ps_style' => 'Ilustraci&#243;n del estilo de resolver problemas', 'cw_gender' => 'G&#233;nero del personaje', 'noetictension' => 'Tensi&#243;n no&#233;tica principal', 'illust_nt' => 'Ilustraci&#243;n de la tens&#237;on no&#233;tica', 'impression' => 'Gesti&#243;n general de impresiones', 'illust_im' => 'Ilustraci&#243;n de la gesti&#243;n de impresi&#243;n', 'mcs_problem' => 'Problema MCS', 'illust_mcs_problem' => 'Ilustraci&#243;n de problema', 'illust_mcs_solution' => 'Ilustraci&#243;n de soluci&#243;n', 'illust_mcs_symptom' => 'Ilustraci&#243;n de s&#237;ntoma', 'illust_mcs_response' => 'Illustration of MCS Response', ];

	$x->QueryFrom = "`hist_chr_dev` LEFT JOIN `hist_story` as hist_story1 ON `hist_story1`.`id`=`hist_chr_dev`.`hist_story` LEFT JOIN `bio_story` as bio_story1 ON `bio_story1`.`id`=`hist_chr_dev`.`bio_story` LEFT JOIN `biblio_author` as biblio_author1 ON `biblio_author1`.`id`=`hist_chr_dev`.`agent_id` LEFT JOIN `hist_chr` as hist_chr1 ON `hist_chr1`.`id`=`hist_chr_dev`.`agent_name` LEFT JOIN `class_dramatica_character` as class_dramatica_character1 ON `class_dramatica_character1`.`id`=`hist_chr1`.`story_character` LEFT JOIN `hist_chr` as hist_chr2 ON `hist_chr2`.`id`=`hist_chr_dev`.`cw_name` LEFT JOIN `class_dynamicstorypoints1` as class_dynamicstorypoints11 ON `class_dynamicstorypoints11`.`id`=`hist_chr_dev`.`dp1_resolve` LEFT JOIN `class_dynamicstorypoints2` as class_dynamicstorypoints21 ON `class_dynamicstorypoints21`.`id`=`hist_chr_dev`.`dp2_resolve` LEFT JOIN `class_dynamicstorypoints3` as class_dynamicstorypoints31 ON `class_dynamicstorypoints31`.`id`=`hist_chr_dev`.`dp3_resolve` LEFT JOIN `class_dynamicstorypoints4` as class_dynamicstorypoints41 ON `class_dynamicstorypoints41`.`id`=`hist_chr_dev`.`mc_resolve` LEFT JOIN `hist_chr_scene` as hist_chr_scene1 ON `hist_chr_scene1`.`id`=`hist_chr_dev`.`illust_resolve` LEFT JOIN `class_dynamicstorypoints3` as class_dynamicstorypoints32 ON `class_dynamicstorypoints32`.`id`=`hist_chr_dev`.`dp3_growth` LEFT JOIN `class_dynamicstorypoints4` as class_dynamicstorypoints42 ON `class_dynamicstorypoints42`.`id`=`hist_chr_dev`.`mc_growth` LEFT JOIN `hist_chr_scene` as hist_chr_scene2 ON `hist_chr_scene2`.`id`=`hist_chr_dev`.`illust_growth` LEFT JOIN `class_dynamicstorypoints3` as class_dynamicstorypoints33 ON `class_dynamicstorypoints33`.`id`=`hist_chr_dev`.`dp3_approach` LEFT JOIN `class_dynamicstorypoints4` as class_dynamicstorypoints43 ON `class_dynamicstorypoints43`.`id`=`hist_chr_dev`.`mc_approach` LEFT JOIN `hist_chr_scene` as hist_chr_scene3 ON `hist_chr_scene3`.`id`=`hist_chr_dev`.`illust_approach` LEFT JOIN `class_dynamicstorypoints3` as class_dynamicstorypoints34 ON `class_dynamicstorypoints34`.`id`=`hist_chr_dev`.`dp3_psstyle` LEFT JOIN `class_dynamicstorypoints4` as class_dynamicstorypoints44 ON `class_dynamicstorypoints44`.`id`=`hist_chr_dev`.`mc_ps_style` LEFT JOIN `hist_chr_scene` as hist_chr_scene4 ON `hist_chr_scene4`.`id`=`hist_chr_dev`.`illust_ps_style` LEFT JOIN `class_gender` as class_gender1 ON `class_gender1`.`id`=`hist_chr_dev`.`cw_gender` LEFT JOIN `class_nt` as class_nt1 ON `class_nt1`.`id`=`hist_chr_dev`.`noetictension` LEFT JOIN `hist_chr_scene` as hist_chr_scene5 ON `hist_chr_scene5`.`id`=`hist_chr_dev`.`illust_nt` LEFT JOIN `class_im` as class_im1 ON `class_im1`.`id`=`hist_chr_dev`.`impression` LEFT JOIN `hist_chr_scene` as hist_chr_scene6 ON `hist_chr_scene6`.`id`=`hist_chr_dev`.`illust_im` LEFT JOIN `hist_storystatic` as hist_storystatic1 ON `hist_storystatic1`.`id`=`hist_chr_dev`.`mcs_problem` LEFT JOIN `class_dramatica_themes` as class_dramatica_themes1 ON `class_dramatica_themes1`.`id`=`hist_storystatic1`.`problem` LEFT JOIN `hist_chr_scene` as hist_chr_scene7 ON `hist_chr_scene7`.`id`=`hist_chr_dev`.`illust_mcs_problem` LEFT JOIN `hist_chr_scene` as hist_chr_scene8 ON `hist_chr_scene8`.`id`=`hist_chr_dev`.`illust_mcs_solution` LEFT JOIN `hist_chr_scene` as hist_chr_scene9 ON `hist_chr_scene9`.`id`=`hist_chr_dev`.`illust_mcs_symptom` LEFT JOIN `hist_chr_scene` as hist_chr_scene10 ON `hist_chr_scene10`.`id`=`hist_chr_dev`.`illust_mcs_response` LEFT JOIN `class_dramatica_themes` as class_dramatica_themes2 ON `class_dramatica_themes2`.`id`=`hist_storystatic1`.`solution` LEFT JOIN `class_dramatica_themes` as class_dramatica_themes3 ON `class_dramatica_themes3`.`id`=`hist_storystatic1`.`symptom` LEFT JOIN `class_dramatica_themes` as class_dramatica_themes4 ON `class_dramatica_themes4`.`id`=`hist_storystatic1`.`response` ";
	$x->QueryWhere = '';
	$x->QueryOrder = '';

	$x->AllowSelection = 1;
	$x->HideTableView = ($perm['view'] == 0 ? 1 : 0);
	$x->AllowDelete = $perm['delete'];
	$x->AllowMassDelete = (getLoggedAdmin() !== false);
	$x->AllowInsert = $perm['insert'];
	$x->AllowUpdate = $perm['edit'];
	$x->SeparateDV = 1;
	$x->AllowDeleteOfParents = 0;
	$x->AllowFilters = 1;
	$x->AllowSavingFilters = 1;
	$x->AllowSorting = 1;
	$x->AllowNavigation = 1;
	$x->AllowPrinting = 1;
	$x->AllowPrintingDV = 1;
	$x->AllowCSV = 1;
	$x->RecordsPerPage = 10;
	$x->QuickSearch = 1;
	$x->QuickSearchText = $Translation['quick search'];
	$x->ScriptFileName = 'hist_chr_dev_view.php';
	$x->RedirectAfterInsert = 'hist_chr_dev_view.php?SelectedID=#ID#';
	$x->TableTitle = 'Desarrollo de personaje de hist&#243;ria';
	$x->TableIcon = 'resources/table_icons/private.png';
	$x->PrimaryKey = '`hist_chr_dev`.`id`';

	$x->ColWidth = [150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, 150, ];
	$x->ColCaption = ['ID', 'Historia', 'Biograf&#237;a', 'ID autor', 'Nombre de autor', 'Nombre de personaje', 'Punto din&#225;mico categor&#237;a 1', 'Punto din&#225;mico categor&#237;a 2', 'Punto din&#225;mico categor&#237;a 3', 'Resoluci&#243;n de personaje principal', 'Ilustraci&#243;n de la resoluci&#243;n', 'Punto din&#225;mico Crecimiento', 'Crecimiento de personaje principal', 'Ilustraci&#243;n del crecimiento', 'Punto din&#225;mico Enfoque', 'Enfoque de personaje principal', 'Ilustraci&#243;n del enfoque', 'Punto din&#225;mico estilo de resolver problemas', 'Estilo de resolver problemas de personaje principal', 'Ilustraci&#243;n del estilo de resolver problemas', 'Edad de personaje', 'G&#233;nero del personaje', 'Estilo de comunicaci&#243;n', 'Antecendents', 'Aspecto f&#237;sico', 'Relaciones', 'Ambiciones', 'Defectos', 'Ideas', 'Apego', 'Restricciones', 'Lugar(es)', 'Persona(s)', 'Eventos', 'Tensi&#243;n no&#233;tica principal', 'Ilustraci&#243;n de la tens&#237;on no&#233;tica', 'Gesti&#243;n general de impresiones', 'Ilustraci&#243;n de la gesti&#243;n de impresi&#243;n', 'Problema MCS', 'Ilustraci&#243;n de problema', 'Soluci&#243;n MCS', 'Ilustraci&#243;n de soluci&#243;n', 'S&#237;ntoma', 'Ilustraci&#243;n de s&#237;ntoma', 'Respuesta', 'Illustration of MCS Response', ];
	$x->ColFieldName = ['id', 'hist_story', 'bio_story', 'agent_id', 'agent_name', 'cw_name', 'dp1_resolve', 'dp2_resolve', 'dp3_resolve', 'mc_resolve', 'illust_resolve', 'dp3_growth', 'mc_growth', 'illust_growth', 'dp3_approach', 'mc_approach', 'illust_approach', 'dp3_psstyle', 'mc_ps_style', 'illust_ps_style', 'cw_age', 'cw_gender', 'cw_communication_style', 'cw_background', 'cw_appearance', 'cw_relationships', 'cw_ambition', 'cw_defects', 'cw_thoughts', 'cw_relatedness', 'cw_restrictions', 'locations', 'persons', 'events', 'noetictension', 'illust_nt', 'impression', 'illust_im', 'mcs_problem', 'illust_mcs_problem', 'mcs_solution', 'illust_mcs_solution', 'mcs_symptom', 'illust_mcs_symptom', 'mcs_response', 'illust_mcs_response', ];
	$x->ColNumber  = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, ];

	// template paths below are based on the app main directory
	$x->Template = 'templates/hist_chr_dev_templateTV.html';
	$x->SelectedTemplate = 'templates/hist_chr_dev_templateTVS.html';
	$x->TemplateDV = 'templates/hist_chr_dev_templateDV.html';
	$x->TemplateDVP = 'templates/hist_chr_dev_templateDVP.html';

	$x->ShowTableHeader = 1;
	$x->TVClasses = "";
	$x->DVClasses = "";
	$x->HasCalculatedFields = false;
	$x->AllowConsoleLog = false;
	$x->AllowDVNavigation = true;

	// mm: build the query based on current member's permissions
	$DisplayRecords = $_REQUEST['DisplayRecords'];
	if(!in_array($DisplayRecords, ['user', 'group'])) { $DisplayRecords = 'all'; }
	if($perm['view'] == 1 || ($perm['view'] > 1 && $DisplayRecords == 'user' && !$_REQUEST['NoFilter_x'])) { // view owner only
		$x->QueryFrom .= ', `membership_userrecords`';
		$x->QueryWhere = "WHERE `hist_chr_dev`.`id`=`membership_userrecords`.`pkValue` AND `membership_userrecords`.`tableName`='hist_chr_dev' AND LCASE(`membership_userrecords`.`memberID`)='" . getLoggedMemberID() . "'";
	} elseif($perm['view'] == 2 || ($perm['view'] > 2 && $DisplayRecords == 'group' && !$_REQUEST['NoFilter_x'])) { // view group only
		$x->QueryFrom .= ', `membership_userrecords`';
		$x->QueryWhere = "WHERE `hist_chr_dev`.`id`=`membership_userrecords`.`pkValue` AND `membership_userrecords`.`tableName`='hist_chr_dev' AND `membership_userrecords`.`groupID`='" . getLoggedGroupID() . "'";
	} elseif($perm['view'] == 3) { // view all
		// no further action
	} elseif($perm['view'] == 0) { // view none
		$x->QueryFields = ['Not enough permissions' => 'NEP'];
		$x->QueryFrom = '`hist_chr_dev`';
		$x->QueryWhere = '';
		$x->DefaultSortField = '';
	}
	// hook: hist_chr_dev_init
	$render = true;
	if(function_exists('hist_chr_dev_init')) {
		$args = [];
		$render = hist_chr_dev_init($x, getMemberInfo(), $args);
	}

	if($render) $x->Render();

	// hook: hist_chr_dev_header
	$headerCode = '';
	if(function_exists('hist_chr_dev_header')) {
		$args = [];
		$headerCode = hist_chr_dev_header($x->ContentType, getMemberInfo(), $args);
	}

	if(!$headerCode) {
		include_once("{$currDir}/header.php"); 
	} else {
		ob_start();
		include_once("{$currDir}/header.php");
		echo str_replace('<%%HEADER%%>', ob_get_clean(), $headerCode);
	}

	echo $x->HTML;

	// hook: hist_chr_dev_footer
	$footerCode = '';
	if(function_exists('hist_chr_dev_footer')) {
		$args = [];
		$footerCode = hist_chr_dev_footer($x->ContentType, getMemberInfo(), $args);
	}

	if(!$footerCode) {
		include_once("{$currDir}/footer.php"); 
	} else {
		ob_start();
		include_once("{$currDir}/footer.php");
		echo str_replace('<%%FOOTER%%>', ob_get_clean(), $footerCode);
	}
